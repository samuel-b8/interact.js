Object.defineProperty(exports,"__esModule",{value:!0}),exports.snap=exports.default=void 0;var e=o(require("../../utils/extend.prod.js")),t=o(require("../../utils/getOriginXY.prod.js")),n=o(require("../../utils/hypot.prod.js")),r=o(require("../../utils/is.prod.js")),a=require("../../utils/rect.prod.js"),s=require("../base");function o(e){return e&&e.__esModule?e:{default:e}}const i=exports.snap={start(e){const{interaction:n,interactable:r,element:s,rect:o,state:i,startOffset:l}=e,{options:u}=i,d=u.offsetWithOrigin?(e=>{const{element:n}=e.interaction;return(0,a.rectToXY)((0,a.resolveRectLike)(e.state.options.origin,null,null,[n]))||(0,t.default)(e.interactable,n,e.interaction.prepared.name)})(e):{x:0,y:0};let f;if("startCoords"===u.offset)f={x:n.coords.start.page.x,y:n.coords.start.page.y};else{const e=(0,a.resolveRectLike)(u.offset,r,s,[n]);f=(0,a.rectToXY)(e)||{x:0,y:0},f.x+=d.x,f.y+=d.y}const{relativePoints:c}=u;i.offsets=o&&c&&c.length?c.map(((e,t)=>({index:t,relativePoint:e,x:l.left-o.width*e.x+f.x,y:l.top-o.height*e.y+f.y}))):[{index:0,relativePoint:null,x:f.x,y:f.y}]},set(a){const{interaction:s,coords:o,state:i}=a,{options:l,offsets:u}=i,d=(0,t.default)(s.interactable,s.element,s.prepared.name),f=(0,e.default)({},o),c=[];l.offsetWithOrigin||(f.x-=d.x,f.y-=d.y);for(const e of u){const t=f.x-e.x,n=f.y-e.y;for(let a=0,o=l.targets.length;a<o;a++){const o=l.targets[a];let i;i=r.default.func(o)?o(t,n,s._proxy,e,a):o,i&&c.push({x:(r.default.number(i.x)?i.x:t)+e.x,y:(r.default.number(i.y)?i.y:n)+e.y,range:r.default.number(i.range)?i.range:l.range,source:o,index:a,offset:e})}}const g={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}};for(const e of c){const t=e.range,r=e.x-f.x,a=e.y-f.y,s=(0,n.default)(r,a);let o=s<=t;t===1/0&&g.inRange&&g.range!==1/0&&(o=!1),g.target&&!(o?g.inRange&&t!==1/0?s/t<g.distance/g.range:t===1/0&&g.range!==1/0||s<g.distance:!g.inRange&&s<g.distance)||(g.target=e,g.distance=s,g.range=t,g.inRange=o,g.delta.x=r,g.delta.y=a)}return g.inRange&&(o.x=g.target.x,o.y=g.target.y),i.closest=g,g},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};exports.default=(0,s.makeModifier)(i,"snap");
//# sourceMappingURL=pointer.prod.js.map