{
	"version": 3,
	"names": [
		"extend",
		"addEdges",
		"makeModifier",
		"Modification",
		"aspectRatio",
		"start",
		"arg",
		"state",
		"rect",
		"edges",
		"pageCoords",
		"coords",
		"ratio",
		"enabled",
		"options",
		"equalDelta",
		"modifiers",
		"width",
		"height",
		"startCoords",
		"startRect",
		"linkedEdges",
		"top",
		"left",
		"bottom",
		"right",
		"xIsPrimaryAxis",
		"sign",
		"edgeSign",
		"x",
		"y",
		"length",
		"subModification",
		"interaction",
		"copyFrom",
		"modification",
		"prepareStates",
		"startAll",
		"set",
		"initialCoords",
		"aspectMethod",
		"setEqualDelta",
		"setRatio",
		"correctedRect",
		"result",
		"setAll",
		"prevCoords",
		"prevRect",
		"delta",
		"changed",
		"xIsCriticalAxis",
		"Math",
		"abs",
		"eventProps",
		"defaults",
		"newHeight",
		"newWidth"
	],
	"sources": [
		"aspectRatio.ts"
	],
	"sourcesContent": [
		"/**\n * @module modifiers/aspectRatio\n *\n * @description\n * This modifier forces elements to be resized with a specified dx/dy ratio.\n *\n * ```js\n * interact(target).resizable({\n *   modifiers: [\n *     interact.modifiers.snapSize({\n *       targets: [ interact.snappers.grid({ x: 20, y: 20 }) ],\n *     }),\n *     interact.aspectRatio({ ratio: 'preserve' }),\n *   ],\n * });\n * ```\n */\n\nimport type { Point, Rect, EdgeOptions } from '@interactjs/core/types'\nimport extend from '@interactjs/utils/extend'\nimport { addEdges } from '@interactjs/utils/rect'\n\nimport { makeModifier } from './base'\nimport { Modification } from './Modification'\nimport type { Modifier, ModifierModule, ModifierState } from './types'\n\nexport interface AspectRatioOptions {\n  ratio?: number | 'preserve'\n  equalDelta?: boolean\n  modifiers?: Modifier[]\n  enabled?: boolean\n}\n\nexport type AspectRatioState = ModifierState<\n  AspectRatioOptions,\n  {\n    startCoords: Point\n    startRect: Rect\n    linkedEdges: EdgeOptions\n    ratio: number\n    equalDelta: boolean\n    xIsPrimaryAxis: boolean\n    edgeSign: {\n      x: number\n      y: number\n    }\n    subModification: Modification\n  }\n>\n\nconst aspectRatio: ModifierModule<AspectRatioOptions, AspectRatioState> = {\n  start(arg) {\n    const { state, rect, edges, pageCoords: coords } = arg\n    let { ratio, enabled } = state.options\n    const { equalDelta, modifiers } = state.options\n\n    if (ratio === 'preserve') {\n      ratio = rect.width / rect.height\n    }\n\n    state.startCoords = extend({}, coords)\n    state.startRect = extend({}, rect)\n    state.ratio = ratio\n    state.equalDelta = equalDelta\n\n    const linkedEdges = (state.linkedEdges = {\n      top: edges.top || (edges.left && !edges.bottom),\n      left: edges.left || (edges.top && !edges.right),\n      bottom: edges.bottom || (edges.right && !edges.top),\n      right: edges.right || (edges.bottom && !edges.left),\n    })\n\n    state.xIsPrimaryAxis = !!(edges.left || edges.right)\n\n    if (state.equalDelta) {\n      const sign = (linkedEdges.left ? 1 : -1) * (linkedEdges.top ? 1 : -1)\n      state.edgeSign = {\n        x: sign,\n        y: sign,\n      }\n    } else {\n      state.edgeSign = {\n        x: linkedEdges.left ? -1 : 1,\n        y: linkedEdges.top ? -1 : 1,\n      }\n    }\n\n    if (enabled !== false) {\n      extend(edges, linkedEdges)\n    }\n\n    if (!modifiers?.length) return\n\n    const subModification = new Modification(arg.interaction)\n\n    subModification.copyFrom(arg.interaction.modification)\n    subModification.prepareStates(modifiers)\n\n    state.subModification = subModification\n    subModification.startAll({ ...arg })\n  },\n\n  set(arg) {\n    const { state, rect, coords } = arg\n    const { linkedEdges } = state\n    const initialCoords = extend({}, coords)\n    const aspectMethod = state.equalDelta ? setEqualDelta : setRatio\n\n    extend(arg.edges, linkedEdges)\n    aspectMethod(state, state.xIsPrimaryAxis, coords, rect)\n\n    if (!state.subModification) {\n      return null\n    }\n\n    const correctedRect = extend({}, rect)\n\n    addEdges(linkedEdges, correctedRect, {\n      x: coords.x - initialCoords.x,\n      y: coords.y - initialCoords.y,\n    })\n\n    const result = state.subModification.setAll({\n      ...arg,\n      rect: correctedRect,\n      edges: linkedEdges,\n      pageCoords: coords,\n      prevCoords: coords,\n      prevRect: correctedRect,\n    })\n\n    const { delta } = result\n\n    if (result.changed) {\n      const xIsCriticalAxis = Math.abs(delta.x) > Math.abs(delta.y)\n\n      // do aspect modification again with critical edge axis as primary\n      aspectMethod(state, xIsCriticalAxis, result.coords, result.rect)\n      extend(coords, result.coords)\n    }\n\n    return result.eventProps\n  },\n\n  defaults: {\n    ratio: 'preserve',\n    equalDelta: false,\n    modifiers: [],\n    enabled: false,\n  },\n}\n\nfunction setEqualDelta({ startCoords, edgeSign }: AspectRatioState, xIsPrimaryAxis: boolean, coords: Point) {\n  if (xIsPrimaryAxis) {\n    coords.y = startCoords.y + (coords.x - startCoords.x) * edgeSign.y\n  } else {\n    coords.x = startCoords.x + (coords.y - startCoords.y) * edgeSign.x\n  }\n}\n\nfunction setRatio(\n  { startRect, startCoords, ratio, edgeSign }: AspectRatioState,\n  xIsPrimaryAxis: boolean,\n  coords: Point,\n  rect: Rect,\n) {\n  if (xIsPrimaryAxis) {\n    const newHeight = rect.width / ratio\n\n    coords.y = startCoords.y + (newHeight - startRect.height) * edgeSign.y\n  } else {\n    const newWidth = rect.height * ratio\n\n    coords.x = startCoords.x + (newWidth - startRect.width) * edgeSign.x\n  }\n}\n\nexport default makeModifier(aspectRatio, 'aspectRatio')\nexport { aspectRatio }\n"
	],
	"mappings": "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"
}