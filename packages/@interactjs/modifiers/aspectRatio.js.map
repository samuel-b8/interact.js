{
	"version": 3,
	"names": [
		"_extend",
		"_interopRequireDefault",
		"require",
		"_rect",
		"_base",
		"_Modification",
		"obj",
		"__esModule",
		"default",
		"aspectRatio",
		"exports",
		"start",
		"arg",
		"state",
		"rect",
		"edges",
		"pageCoords",
		"coords",
		"ratio",
		"enabled",
		"options",
		"equalDelta",
		"modifiers",
		"width",
		"height",
		"startCoords",
		"extend",
		"startRect",
		"linkedEdges",
		"top",
		"left",
		"bottom",
		"right",
		"xIsPrimaryAxis",
		"sign",
		"edgeSign",
		"x",
		"y",
		"length",
		"subModification",
		"Modification",
		"interaction",
		"copyFrom",
		"modification",
		"prepareStates",
		"startAll",
		"set",
		"initialCoords",
		"aspectMethod",
		"setEqualDelta",
		"setRatio",
		"correctedRect",
		"addEdges",
		"result",
		"setAll",
		"prevCoords",
		"prevRect",
		"delta",
		"changed",
		"xIsCriticalAxis",
		"Math",
		"abs",
		"eventProps",
		"defaults",
		"newHeight",
		"newWidth",
		"_default",
		"makeModifier"
	],
	"sources": [
		"aspectRatio.ts"
	],
	"sourcesContent": [
		"/**\n * @module modifiers/aspectRatio\n *\n * @description\n * This modifier forces elements to be resized with a specified dx/dy ratio.\n *\n * ```js\n * interact(target).resizable({\n *   modifiers: [\n *     interact.modifiers.snapSize({\n *       targets: [ interact.snappers.grid({ x: 20, y: 20 }) ],\n *     }),\n *     interact.aspectRatio({ ratio: 'preserve' }),\n *   ],\n * });\n * ```\n */\n\nimport type { Point, Rect, EdgeOptions } from '@interactjs/core/types'\nimport extend from '@interactjs/utils/extend'\nimport { addEdges } from '@interactjs/utils/rect'\n\nimport { makeModifier } from './base'\nimport { Modification } from './Modification'\nimport type { Modifier, ModifierModule, ModifierState } from './types'\n\nexport interface AspectRatioOptions {\n  ratio?: number | 'preserve'\n  equalDelta?: boolean\n  modifiers?: Modifier[]\n  enabled?: boolean\n}\n\nexport type AspectRatioState = ModifierState<\n  AspectRatioOptions,\n  {\n    startCoords: Point\n    startRect: Rect\n    linkedEdges: EdgeOptions\n    ratio: number\n    equalDelta: boolean\n    xIsPrimaryAxis: boolean\n    edgeSign: {\n      x: number\n      y: number\n    }\n    subModification: Modification\n  }\n>\n\nconst aspectRatio: ModifierModule<AspectRatioOptions, AspectRatioState> = {\n  start(arg) {\n    const { state, rect, edges, pageCoords: coords } = arg\n    let { ratio, enabled } = state.options\n    const { equalDelta, modifiers } = state.options\n\n    if (ratio === 'preserve') {\n      ratio = rect.width / rect.height\n    }\n\n    state.startCoords = extend({}, coords)\n    state.startRect = extend({}, rect)\n    state.ratio = ratio\n    state.equalDelta = equalDelta\n\n    const linkedEdges = (state.linkedEdges = {\n      top: edges.top || (edges.left && !edges.bottom),\n      left: edges.left || (edges.top && !edges.right),\n      bottom: edges.bottom || (edges.right && !edges.top),\n      right: edges.right || (edges.bottom && !edges.left),\n    })\n\n    state.xIsPrimaryAxis = !!(edges.left || edges.right)\n\n    if (state.equalDelta) {\n      const sign = (linkedEdges.left ? 1 : -1) * (linkedEdges.top ? 1 : -1)\n      state.edgeSign = {\n        x: sign,\n        y: sign,\n      }\n    } else {\n      state.edgeSign = {\n        x: linkedEdges.left ? -1 : 1,\n        y: linkedEdges.top ? -1 : 1,\n      }\n    }\n\n    if (enabled !== false) {\n      extend(edges, linkedEdges)\n    }\n\n    if (!modifiers?.length) return\n\n    const subModification = new Modification(arg.interaction)\n\n    subModification.copyFrom(arg.interaction.modification)\n    subModification.prepareStates(modifiers)\n\n    state.subModification = subModification\n    subModification.startAll({ ...arg })\n  },\n\n  set(arg) {\n    const { state, rect, coords } = arg\n    const { linkedEdges } = state\n    const initialCoords = extend({}, coords)\n    const aspectMethod = state.equalDelta ? setEqualDelta : setRatio\n\n    extend(arg.edges, linkedEdges)\n    aspectMethod(state, state.xIsPrimaryAxis, coords, rect)\n\n    if (!state.subModification) {\n      return null\n    }\n\n    const correctedRect = extend({}, rect)\n\n    addEdges(linkedEdges, correctedRect, {\n      x: coords.x - initialCoords.x,\n      y: coords.y - initialCoords.y,\n    })\n\n    const result = state.subModification.setAll({\n      ...arg,\n      rect: correctedRect,\n      edges: linkedEdges,\n      pageCoords: coords,\n      prevCoords: coords,\n      prevRect: correctedRect,\n    })\n\n    const { delta } = result\n\n    if (result.changed) {\n      const xIsCriticalAxis = Math.abs(delta.x) > Math.abs(delta.y)\n\n      // do aspect modification again with critical edge axis as primary\n      aspectMethod(state, xIsCriticalAxis, result.coords, result.rect)\n      extend(coords, result.coords)\n    }\n\n    return result.eventProps\n  },\n\n  defaults: {\n    ratio: 'preserve',\n    equalDelta: false,\n    modifiers: [],\n    enabled: false,\n  },\n}\n\nfunction setEqualDelta({ startCoords, edgeSign }: AspectRatioState, xIsPrimaryAxis: boolean, coords: Point) {\n  if (xIsPrimaryAxis) {\n    coords.y = startCoords.y + (coords.x - startCoords.x) * edgeSign.y\n  } else {\n    coords.x = startCoords.x + (coords.y - startCoords.y) * edgeSign.x\n  }\n}\n\nfunction setRatio(\n  { startRect, startCoords, ratio, edgeSign }: AspectRatioState,\n  xIsPrimaryAxis: boolean,\n  coords: Point,\n  rect: Rect,\n) {\n  if (xIsPrimaryAxis) {\n    const newHeight = rect.width / ratio\n\n    coords.y = startCoords.y + (newHeight - startRect.height) * edgeSign.y\n  } else {\n    const newWidth = rect.height * ratio\n\n    coords.x = startCoords.x + (newWidth - startRect.width) * edgeSign.x\n  }\n}\n\nexport default makeModifier(aspectRatio, 'aspectRatio')\nexport { aspectRatio }\n"
	],
	"mappings": "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"
}