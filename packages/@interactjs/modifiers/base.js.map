{
	"version": 3,
	"names": [
		"Modification",
		"makeModifier",
		"module",
		"name",
		"defaults",
		"methods",
		"start",
		"set",
		"beforeEnd",
		"stop",
		"modifier",
		"_options",
		"options",
		"enabled",
		"prop",
		"m",
		"enable",
		"disable",
		"_defaults",
		"_methods",
		"addEventModifiers",
		"iEvent",
		"interaction",
		"result",
		"modification",
		"modifiers",
		"eventProps",
		"modifiersBase",
		"id",
		"before",
		"install",
		"scope",
		"perAction",
		"listeners",
		"interactions:new",
		"arg",
		"coords",
		"page",
		"edges",
		"applyToInteraction",
		"ret",
		"setAndApply",
		"startEdges",
		"restoreInteractionCoords"
	],
	"sources": [
		"base.ts"
	],
	"sourcesContent": [
		"import type { InteractEvent } from '@interactjs/core/InteractEvent'\nimport type Interaction from '@interactjs/core/Interaction'\nimport type { Plugin } from '@interactjs/core/scope'\n\nimport { Modification } from './Modification'\nimport type { Modifier, ModifierModule, ModifierState } from './types'\n\ndeclare module '@interactjs/core/Interaction' {\n  interface Interaction {\n    modification?: Modification\n  }\n}\n\ndeclare module '@interactjs/core/InteractEvent' {\n  interface InteractEvent {\n    modifiers?: Array<{\n      name: string\n      [key: string]: any\n    }>\n  }\n}\n\ndeclare module '@interactjs/core/options' {\n  interface PerActionDefaults {\n    modifiers?: Modifier[]\n  }\n}\n\nexport function makeModifier<\n  Defaults extends { enabled?: boolean },\n  State extends ModifierState,\n  Name extends string,\n  Result,\n>(module: ModifierModule<Defaults, State, Result>, name?: Name) {\n  const { defaults } = module\n  const methods = {\n    start: module.start,\n    set: module.set,\n    beforeEnd: module.beforeEnd,\n    stop: module.stop,\n  }\n\n  const modifier = (_options?: Partial<Defaults>) => {\n    const options = (_options || {}) as Defaults\n\n    options.enabled = options.enabled !== false\n\n    // add missing defaults to options\n    for (const prop in defaults) {\n      if (!(prop in options)) {\n        ;(options as any)[prop] = defaults[prop]\n      }\n    }\n\n    const m: Modifier<Defaults, State, Name, Result> = {\n      options,\n      methods,\n      name,\n      enable: () => {\n        options.enabled = true\n        return m\n      },\n      disable: () => {\n        options.enabled = false\n        return m\n      },\n    }\n\n    return m\n  }\n\n  if (name && typeof name === 'string') {\n    // for backwrads compatibility\n    modifier._defaults = defaults\n    modifier._methods = methods\n  }\n\n  return modifier\n}\n\nexport function addEventModifiers({\n  iEvent,\n  interaction,\n}: {\n  iEvent: InteractEvent<any>\n  interaction: Interaction<any>\n}) {\n  const result = interaction.modification!.result\n\n  if (result) {\n    iEvent.modifiers = result.eventProps\n  }\n}\n\nconst modifiersBase: Plugin = {\n  id: 'modifiers/base',\n  before: ['actions'],\n  install: (scope) => {\n    scope.defaults.perAction.modifiers = []\n  },\n  listeners: {\n    'interactions:new': ({ interaction }) => {\n      interaction.modification = new Modification(interaction)\n    },\n\n    'interactions:before-action-start': (arg) => {\n      const { interaction } = arg\n      const modification = arg.interaction.modification!\n\n      modification.start(arg, interaction.coords.start.page)\n      interaction.edges = modification.edges\n      modification.applyToInteraction(arg)\n    },\n\n    'interactions:before-action-move': (arg) => {\n      const { interaction } = arg\n      const { modification } = interaction\n      const ret = modification.setAndApply(arg)\n      interaction.edges = modification.edges\n\n      return ret\n    },\n\n    'interactions:before-action-end': (arg) => {\n      const { interaction } = arg\n      const { modification } = interaction\n      const ret = modification.beforeEnd(arg)\n      interaction.edges = modification.startEdges\n\n      return ret\n    },\n\n    'interactions:action-start': addEventModifiers,\n    'interactions:action-move': addEventModifiers,\n    'interactions:action-end': addEventModifiers,\n\n    'interactions:after-action-start': (arg) => arg.interaction.modification.restoreInteractionCoords(arg),\n    'interactions:after-action-move': (arg) => arg.interaction.modification.restoreInteractionCoords(arg),\n\n    'interactions:stop': (arg) => arg.interaction.modification.stop(arg),\n  },\n}\n\nexport default modifiersBase\n"
	],
	"mappings": "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"
}