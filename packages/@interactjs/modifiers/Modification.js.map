{
	"version": 3,
	"names": [
		"_clone",
		"_interopRequireDefault",
		"require",
		"_extend",
		"rectUtils",
		"_interopRequireWildcard",
		"_getRequireWildcardCache",
		"e",
		"WeakMap",
		"r",
		"t",
		"__esModule",
		"default",
		"has",
		"get",
		"n",
		"__proto__",
		"a",
		"Object",
		"defineProperty",
		"getOwnPropertyDescriptor",
		"u",
		"prototype",
		"hasOwnProperty",
		"call",
		"i",
		"set",
		"obj",
		"Modification",
		"states",
		"startOffset",
		"left",
		"right",
		"top",
		"bottom",
		"startDelta",
		"result",
		"endResult",
		"startEdges",
		"edges",
		"interaction",
		"constructor",
		"createResult",
		"start",
		"phase",
		"pageCoords",
		"modifierList",
		"getModifierList",
		"prepareStates",
		"extend",
		"getRectOffset",
		"rect",
		"x",
		"y",
		"arg",
		"fillArg",
		"preEnd",
		"startAll",
		"setAll",
		"interactable",
		"element",
		"state",
		"methods",
		"skipModifiers",
		"unmodifiedRect",
		"unmodifiedEdges",
		"coords",
		"slice",
		"newResult",
		"_state$methods",
		"options",
		"lastModifierCoords",
		"returnValue",
		"shouldDo",
		"addEdges",
		"eventProps",
		"push",
		"delta",
		"rectDelta",
		"prevCoords",
		"prevRect",
		"rectChanged",
		"changed",
		"applyToInteraction",
		"curCoords",
		"cur",
		"startCoords",
		"curDelta",
		"coordsSet",
		"page",
		"client",
		"width",
		"height",
		"setAndApply",
		"modifiedCoords",
		"length",
		"interacting",
		"adjustment",
		"beforeEnd",
		"event",
		"doPreend",
		"endPosition",
		"move",
		"stop",
		"modifierArg",
		"index",
		"name",
		"restoreInteractionCoords",
		"modification",
		"coordsAndDeltas",
		"requireEndOnly",
		"enabled",
		"endOnly",
		"setStart",
		"copyFrom",
		"other",
		"map",
		"s",
		"clone",
		"destroy",
		"prop",
		"exports",
		"actionOptions",
		"prepared",
		"actionModifiers",
		"modifiers",
		"type",
		"_methods",
		"filter",
		"m"
	],
	"sources": [
		"Modification.ts"
	],
	"sourcesContent": [
		"import type { EventPhase } from '@interactjs/core/InteractEvent'\nimport type { Interaction, DoAnyPhaseArg } from '@interactjs/core/Interaction'\nimport type { EdgeOptions, FullRect, Point, Rect } from '@interactjs/core/types'\nimport clone from '@interactjs/utils/clone'\nimport extend from '@interactjs/utils/extend'\nimport * as rectUtils from '@interactjs/utils/rect'\n\nimport type { Modifier, ModifierArg, ModifierState } from './types'\n\nexport interface ModificationResult {\n  delta: Point\n  rectDelta: Rect\n  coords: Point\n  rect: FullRect\n  eventProps: any[]\n  changed: boolean\n}\n\ninterface MethodArg {\n  phase: EventPhase\n  pageCoords: Point\n  rect: FullRect\n  coords: Point\n  preEnd?: boolean\n  skipModifiers?: number\n}\n\nexport class Modification {\n  states: ModifierState[] = []\n  startOffset: Rect = { left: 0, right: 0, top: 0, bottom: 0 }\n  startDelta!: Point\n  result!: ModificationResult\n  endResult!: Point\n  startEdges!: EdgeOptions\n  edges: EdgeOptions\n  readonly interaction: Readonly<Interaction>\n\n  constructor(interaction: Interaction) {\n    this.interaction = interaction\n    this.result = createResult()\n    this.edges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false,\n    }\n  }\n\n  start({ phase }: { phase: EventPhase }, pageCoords: Point) {\n    const { interaction } = this\n    const modifierList = getModifierList(interaction)\n    this.prepareStates(modifierList)\n\n    this.startEdges = extend({}, interaction.edges)\n    this.edges = extend({}, this.startEdges)\n    this.startOffset = getRectOffset(interaction.rect, pageCoords)\n    this.startDelta = { x: 0, y: 0 }\n\n    const arg = this.fillArg({\n      phase,\n      pageCoords,\n      preEnd: false,\n    })\n\n    this.result = createResult()\n    this.startAll(arg)\n\n    const result = (this.result = this.setAll(arg))\n\n    return result\n  }\n\n  fillArg(arg: Partial<ModifierArg>) {\n    const { interaction } = this\n\n    arg.interaction = interaction\n    arg.interactable = interaction.interactable\n    arg.element = interaction.element\n    arg.rect ||= interaction.rect\n    arg.edges ||= this.startEdges\n    arg.startOffset = this.startOffset\n\n    return arg as ModifierArg\n  }\n\n  startAll(arg: MethodArg & Partial<ModifierArg>) {\n    for (const state of this.states) {\n      if (state.methods.start) {\n        arg.state = state\n        state.methods.start(arg as ModifierArg)\n      }\n    }\n  }\n\n  setAll(arg: MethodArg & Partial<ModifierArg>): ModificationResult {\n    const { phase, preEnd, skipModifiers, rect: unmodifiedRect, edges: unmodifiedEdges } = arg\n\n    arg.coords = extend({}, arg.pageCoords)\n    arg.rect = extend({}, unmodifiedRect)\n    arg.edges = extend({}, unmodifiedEdges)\n\n    const states = skipModifiers ? this.states.slice(skipModifiers) : this.states\n\n    const newResult = createResult(arg.coords, arg.rect)\n\n    for (const state of states) {\n      const { options } = state\n      const lastModifierCoords = extend({}, arg.coords)\n      let returnValue = null\n\n      if (state.methods?.set && this.shouldDo(options, preEnd, phase)) {\n        arg.state = state\n        returnValue = state.methods.set(arg as ModifierArg<never>)\n\n        rectUtils.addEdges(arg.edges, arg.rect, {\n          x: arg.coords.x - lastModifierCoords.x,\n          y: arg.coords.y - lastModifierCoords.y,\n        })\n      }\n\n      newResult.eventProps.push(returnValue)\n    }\n\n    extend(this.edges, arg.edges)\n\n    newResult.delta.x = arg.coords.x - arg.pageCoords.x\n    newResult.delta.y = arg.coords.y - arg.pageCoords.y\n\n    newResult.rectDelta.left = arg.rect.left - unmodifiedRect.left\n    newResult.rectDelta.right = arg.rect.right - unmodifiedRect.right\n    newResult.rectDelta.top = arg.rect.top - unmodifiedRect.top\n    newResult.rectDelta.bottom = arg.rect.bottom - unmodifiedRect.bottom\n\n    const prevCoords = this.result.coords\n    const prevRect = this.result.rect\n\n    if (prevCoords && prevRect) {\n      const rectChanged =\n        newResult.rect.left !== prevRect.left ||\n        newResult.rect.right !== prevRect.right ||\n        newResult.rect.top !== prevRect.top ||\n        newResult.rect.bottom !== prevRect.bottom\n\n      newResult.changed =\n        rectChanged || prevCoords.x !== newResult.coords.x || prevCoords.y !== newResult.coords.y\n    }\n\n    return newResult\n  }\n\n  applyToInteraction(arg: { phase: EventPhase; rect?: Rect }) {\n    const { interaction } = this\n    const { phase } = arg\n    const curCoords = interaction.coords.cur\n    const startCoords = interaction.coords.start\n    const { result, startDelta } = this\n    const curDelta = result.delta\n\n    if (phase === 'start') {\n      extend(this.startDelta, result.delta)\n    }\n\n    for (const [coordsSet, delta] of [\n      [startCoords, startDelta],\n      [curCoords, curDelta],\n    ] as const) {\n      coordsSet.page.x += delta.x\n      coordsSet.page.y += delta.y\n      coordsSet.client.x += delta.x\n      coordsSet.client.y += delta.y\n    }\n\n    const { rectDelta } = this.result\n    const rect = arg.rect || interaction.rect\n\n    rect.left += rectDelta.left\n    rect.right += rectDelta.right\n    rect.top += rectDelta.top\n    rect.bottom += rectDelta.bottom\n\n    rect.width = rect.right - rect.left\n    rect.height = rect.bottom - rect.top\n  }\n\n  setAndApply(\n    arg: Partial<DoAnyPhaseArg> & {\n      phase: EventPhase\n      preEnd?: boolean\n      skipModifiers?: number\n      modifiedCoords?: Point\n    },\n  ): void | false {\n    const { interaction } = this\n    const { phase, preEnd, skipModifiers } = arg\n\n    const result = this.setAll(\n      this.fillArg({\n        preEnd,\n        phase,\n        pageCoords: arg.modifiedCoords || interaction.coords.cur.page,\n      }),\n    )\n\n    this.result = result\n\n    // don't fire an action move if a modifier would keep the event in the same\n    // cordinates as before\n    if (\n      !result.changed &&\n      (!skipModifiers || skipModifiers < this.states.length) &&\n      interaction.interacting()\n    ) {\n      return false\n    }\n\n    if (arg.modifiedCoords) {\n      const { page } = interaction.coords.cur\n      const adjustment = {\n        x: arg.modifiedCoords.x - page.x,\n        y: arg.modifiedCoords.y - page.y,\n      }\n\n      result.coords.x += adjustment.x\n      result.coords.y += adjustment.y\n      result.delta.x += adjustment.x\n      result.delta.y += adjustment.y\n    }\n\n    this.applyToInteraction(arg)\n  }\n\n  beforeEnd(arg: Omit<DoAnyPhaseArg, 'iEvent'> & { state?: ModifierState }): void | false {\n    const { interaction, event } = arg\n    const states = this.states\n\n    if (!states || !states.length) {\n      return\n    }\n\n    let doPreend = false\n\n    for (const state of states) {\n      arg.state = state\n      const { options, methods } = state\n\n      const endPosition = methods.beforeEnd && methods.beforeEnd(arg as unknown as ModifierArg)\n\n      if (endPosition) {\n        this.endResult = endPosition\n        return false\n      }\n\n      doPreend = doPreend || (!doPreend && this.shouldDo(options, true, arg.phase, true))\n    }\n\n    if (doPreend) {\n      // trigger a final modified move before ending\n      interaction.move({ event, preEnd: true })\n    }\n  }\n\n  stop(arg: { interaction: Interaction }) {\n    const { interaction } = arg\n\n    if (!this.states || !this.states.length) {\n      return\n    }\n\n    const modifierArg: Partial<ModifierArg> = extend(\n      {\n        states: this.states,\n        interactable: interaction.interactable,\n        element: interaction.element,\n        rect: null,\n      },\n      arg,\n    )\n\n    this.fillArg(modifierArg)\n\n    for (const state of this.states) {\n      modifierArg.state = state\n\n      if (state.methods.stop) {\n        state.methods.stop(modifierArg as ModifierArg)\n      }\n    }\n\n    this.states = null\n    this.endResult = null\n  }\n\n  prepareStates(modifierList: Modifier[]) {\n    this.states = []\n\n    for (let index = 0; index < modifierList.length; index++) {\n      const { options, methods, name } = modifierList[index]\n\n      this.states.push({\n        options,\n        methods,\n        index,\n        name,\n      })\n    }\n\n    return this.states\n  }\n\n  restoreInteractionCoords({ interaction: { coords, rect, modification } }: { interaction: Interaction }) {\n    if (!modification.result) return\n\n    const { startDelta } = modification\n    const { delta: curDelta, rectDelta } = modification.result\n\n    const coordsAndDeltas = [\n      [coords.start, startDelta],\n      [coords.cur, curDelta],\n    ]\n\n    for (const [coordsSet, delta] of coordsAndDeltas as any) {\n      coordsSet.page.x -= delta.x\n      coordsSet.page.y -= delta.y\n      coordsSet.client.x -= delta.x\n      coordsSet.client.y -= delta.y\n    }\n\n    rect.left -= rectDelta.left\n    rect.right -= rectDelta.right\n    rect.top -= rectDelta.top\n    rect.bottom -= rectDelta.bottom\n  }\n\n  shouldDo(options, preEnd?: boolean, phase?: string, requireEndOnly?: boolean) {\n    if (\n      // ignore disabled modifiers\n      !options ||\n      options.enabled === false ||\n      // check if we require endOnly option to fire move before end\n      (requireEndOnly && !options.endOnly) ||\n      // don't apply endOnly modifiers when not ending\n      (options.endOnly && !preEnd) ||\n      // check if modifier should run be applied on start\n      (phase === 'start' && !options.setStart)\n    ) {\n      return false\n    }\n\n    return true\n  }\n\n  copyFrom(other: Modification) {\n    this.startOffset = other.startOffset\n    this.startDelta = other.startDelta\n    this.startEdges = other.startEdges\n    this.edges = other.edges\n    this.states = other.states.map((s) => clone(s) as ModifierState)\n    this.result = createResult(extend({}, other.result.coords), extend({}, other.result.rect))\n  }\n\n  destroy() {\n    for (const prop in this) {\n      this[prop] = null\n    }\n  }\n}\n\nfunction createResult(coords?: Point, rect?: FullRect): ModificationResult {\n  return {\n    rect,\n    coords,\n    delta: { x: 0, y: 0 },\n    rectDelta: {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n    },\n    eventProps: [],\n    changed: true,\n  }\n}\n\nfunction getModifierList(interaction) {\n  const actionOptions = interaction.interactable.options[interaction.prepared.name]\n  const actionModifiers = actionOptions.modifiers\n\n  if (actionModifiers && actionModifiers.length) {\n    return actionModifiers\n  }\n\n  return ['snap', 'snapSize', 'snapEdges', 'restrict', 'restrictEdges', 'restrictSize']\n    .map((type) => {\n      const options = actionOptions[type]\n\n      return (\n        options &&\n        options.enabled && {\n          options,\n          methods: options._methods,\n        }\n      )\n    })\n    .filter((m) => !!m)\n}\n\nexport function getRectOffset(rect, coords) {\n  return rect\n    ? {\n        left: coords.x - rect.left,\n        top: coords.y - rect.top,\n        right: rect.right - coords.x,\n        bottom: rect.bottom - coords.y,\n      }\n    : {\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0,\n      }\n}\n"
	],
	"mappings": "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"
}