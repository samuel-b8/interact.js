{
	"version": 3,
	"names": [
		"extend",
		"addEdges",
		"makeModifier",
		"Modification",
		"aspectRatio",
		"start",
		"arg",
		"state",
		"rect",
		"edges",
		"pageCoords",
		"coords",
		"ratio",
		"enabled",
		"options",
		"equalDelta",
		"modifiers",
		"width",
		"height",
		"startCoords",
		"startRect",
		"linkedEdges",
		"top",
		"left",
		"bottom",
		"right",
		"xIsPrimaryAxis",
		"sign",
		"edgeSign",
		"x",
		"y",
		"length",
		"subModification",
		"interaction",
		"copyFrom",
		"modification",
		"prepareStates",
		"startAll",
		"set",
		"initialCoords",
		"aspectMethod",
		"setEqualDelta",
		"setRatio",
		"correctedRect",
		"result",
		"setAll",
		"prevCoords",
		"prevRect",
		"delta",
		"changed",
		"Math",
		"abs",
		"eventProps",
		"defaults",
		"newHeight",
		"newWidth"
	],
	"sources": [
		"aspectRatio.ts"
	],
	"sourcesContent": [
		"/**\n * @module modifiers/aspectRatio\n *\n * @description\n * This modifier forces elements to be resized with a specified dx/dy ratio.\n *\n * ```js\n * interact(target).resizable({\n *   modifiers: [\n *     interact.modifiers.snapSize({\n *       targets: [ interact.snappers.grid({ x: 20, y: 20 }) ],\n *     }),\n *     interact.aspectRatio({ ratio: 'preserve' }),\n *   ],\n * });\n * ```\n */\n\nimport type { Point, Rect, EdgeOptions } from '@interactjs/core/types'\nimport extend from '@interactjs/utils/extend'\nimport { addEdges } from '@interactjs/utils/rect'\n\nimport { makeModifier } from './base'\nimport { Modification } from './Modification'\nimport type { Modifier, ModifierModule, ModifierState } from './types'\n\nexport interface AspectRatioOptions {\n  ratio?: number | 'preserve'\n  equalDelta?: boolean\n  modifiers?: Modifier[]\n  enabled?: boolean\n}\n\nexport type AspectRatioState = ModifierState<\n  AspectRatioOptions,\n  {\n    startCoords: Point\n    startRect: Rect\n    linkedEdges: EdgeOptions\n    ratio: number\n    equalDelta: boolean\n    xIsPrimaryAxis: boolean\n    edgeSign: {\n      x: number\n      y: number\n    }\n    subModification: Modification\n  }\n>\n\nconst aspectRatio: ModifierModule<AspectRatioOptions, AspectRatioState> = {\n  start(arg) {\n    const { state, rect, edges, pageCoords: coords } = arg\n    let { ratio, enabled } = state.options\n    const { equalDelta, modifiers } = state.options\n\n    if (ratio === 'preserve') {\n      ratio = rect.width / rect.height\n    }\n\n    state.startCoords = extend({}, coords)\n    state.startRect = extend({}, rect)\n    state.ratio = ratio\n    state.equalDelta = equalDelta\n\n    const linkedEdges = (state.linkedEdges = {\n      top: edges.top || (edges.left && !edges.bottom),\n      left: edges.left || (edges.top && !edges.right),\n      bottom: edges.bottom || (edges.right && !edges.top),\n      right: edges.right || (edges.bottom && !edges.left),\n    })\n\n    state.xIsPrimaryAxis = !!(edges.left || edges.right)\n\n    if (state.equalDelta) {\n      const sign = (linkedEdges.left ? 1 : -1) * (linkedEdges.top ? 1 : -1)\n      state.edgeSign = {\n        x: sign,\n        y: sign,\n      }\n    } else {\n      state.edgeSign = {\n        x: linkedEdges.left ? -1 : 1,\n        y: linkedEdges.top ? -1 : 1,\n      }\n    }\n\n    if (enabled !== false) {\n      extend(edges, linkedEdges)\n    }\n\n    if (!modifiers?.length) return\n\n    const subModification = new Modification(arg.interaction)\n\n    subModification.copyFrom(arg.interaction.modification)\n    subModification.prepareStates(modifiers)\n\n    state.subModification = subModification\n    subModification.startAll({ ...arg })\n  },\n\n  set(arg) {\n    const { state, rect, coords } = arg\n    const { linkedEdges } = state\n    const initialCoords = extend({}, coords)\n    const aspectMethod = state.equalDelta ? setEqualDelta : setRatio\n\n    extend(arg.edges, linkedEdges)\n    aspectMethod(state, state.xIsPrimaryAxis, coords, rect)\n\n    if (!state.subModification) {\n      return null\n    }\n\n    const correctedRect = extend({}, rect)\n\n    addEdges(linkedEdges, correctedRect, {\n      x: coords.x - initialCoords.x,\n      y: coords.y - initialCoords.y,\n    })\n\n    const result = state.subModification.setAll({\n      ...arg,\n      rect: correctedRect,\n      edges: linkedEdges,\n      pageCoords: coords,\n      prevCoords: coords,\n      prevRect: correctedRect,\n    })\n\n    const { delta } = result\n\n    if (result.changed) {\n      const xIsCriticalAxis = Math.abs(delta.x) > Math.abs(delta.y)\n\n      // do aspect modification again with critical edge axis as primary\n      aspectMethod(state, xIsCriticalAxis, result.coords, result.rect)\n      extend(coords, result.coords)\n    }\n\n    return result.eventProps\n  },\n\n  defaults: {\n    ratio: 'preserve',\n    equalDelta: false,\n    modifiers: [],\n    enabled: false,\n  },\n}\n\nfunction setEqualDelta({ startCoords, edgeSign }: AspectRatioState, xIsPrimaryAxis: boolean, coords: Point) {\n  if (xIsPrimaryAxis) {\n    coords.y = startCoords.y + (coords.x - startCoords.x) * edgeSign.y\n  } else {\n    coords.x = startCoords.x + (coords.y - startCoords.y) * edgeSign.x\n  }\n}\n\nfunction setRatio(\n  { startRect, startCoords, ratio, edgeSign }: AspectRatioState,\n  xIsPrimaryAxis: boolean,\n  coords: Point,\n  rect: Rect,\n) {\n  if (xIsPrimaryAxis) {\n    const newHeight = rect.width / ratio\n\n    coords.y = startCoords.y + (newHeight - startRect.height) * edgeSign.y\n  } else {\n    const newWidth = rect.height * ratio\n\n    coords.x = startCoords.x + (newWidth - startRect.width) * edgeSign.x\n  }\n}\n\nexport default makeModifier(aspectRatio, 'aspectRatio')\nexport { aspectRatio }\n"
	],
	"mappings": "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"
}