Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.aspectRatio=void 0;var t,e=(t=require("../utils/extend.prod.js"))&&t.__esModule?t:{default:t},o=require("../utils/rect.prod.js"),r=require("./base"),i=require("./Modification");const s=exports.aspectRatio={start(t){const{state:o,rect:r,edges:s,pageCoords:a}=t;let{ratio:d,enabled:l}=o.options;const{equalDelta:n,modifiers:c}=o.options;"preserve"===d&&(d=r.width/r.height),o.startCoords=(0,e.default)({},a),o.startRect=(0,e.default)({},r),o.ratio=d,o.equalDelta=n;const u=o.linkedEdges={top:s.top||s.left&&!s.bottom,left:s.left||s.top&&!s.right,bottom:s.bottom||s.right&&!s.top,right:s.right||s.bottom&&!s.left};if(o.xIsPrimaryAxis=!(!s.left&&!s.right),o.equalDelta){const t=(u.left?1:-1)*(u.top?1:-1);o.edgeSign={x:t,y:t}}else o.edgeSign={x:u.left?-1:1,y:u.top?-1:1};if(!1!==l&&(0,e.default)(s,u),null==c||!c.length)return;const f=new i.Modification(t.interaction);f.copyFrom(t.interaction.modification),f.prepareStates(c),o.subModification=f,f.startAll({...t})},set(t){const{state:r,rect:i,coords:s}=t,{linkedEdges:l}=r,n=(0,e.default)({},s),c=r.equalDelta?a:d;if((0,e.default)(t.edges,l),c(r,r.xIsPrimaryAxis,s,i),!r.subModification)return null;const u=(0,e.default)({},i);(0,o.addEdges)(l,u,{x:s.x-n.x,y:s.y-n.y});const f=r.subModification.setAll({...t,rect:u,edges:l,pageCoords:s,prevCoords:s,prevRect:u}),{delta:p}=f;return f.changed&&(c(r,Math.abs(p.x)>Math.abs(p.y),f.coords,f.rect),(0,e.default)(s,f.coords)),f.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function a({startCoords:t,edgeSign:e},o,r){o?r.y=t.y+(r.x-t.x)*e.y:r.x=t.x+(r.y-t.y)*e.x}function d({startRect:t,startCoords:e,ratio:o,edgeSign:r},i,s,a){if(i){const i=a.width/o;s.y=e.y+(i-t.height)*r.y}else{const i=a.height*o;s.x=e.x+(i-t.width)*r.x}}exports.default=(0,r.makeModifier)(s,"aspectRatio");
//# sourceMappingURL=aspectRatio.prod.js.map