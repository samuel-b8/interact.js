{
	"version": 3,
	"names": [
		"_extend",
		"_interopRequireDefault",
		"require",
		"_is",
		"rectUtils",
		"_interopRequireWildcard",
		"_base",
		"_getRequireWildcardCache",
		"e",
		"WeakMap",
		"r",
		"t",
		"__esModule",
		"default",
		"has",
		"get",
		"n",
		"__proto__",
		"a",
		"Object",
		"defineProperty",
		"getOwnPropertyDescriptor",
		"u",
		"prototype",
		"hasOwnProperty",
		"call",
		"i",
		"set",
		"obj",
		"start",
		"rect",
		"startOffset",
		"state",
		"interaction",
		"pageCoords",
		"options",
		"elementRect",
		"offset",
		"extend",
		"left",
		"top",
		"right",
		"bottom",
		"restriction",
		"getRestrictionRect",
		"widthDiff",
		"width",
		"heightDiff",
		"height",
		"coords",
		"xywhToTlbr",
		"x",
		"Math",
		"max",
		"min",
		"y",
		"value",
		"is",
		"func",
		"resolveRectLike",
		"interactable",
		"element",
		"defaults",
		"endOnly",
		"enabled",
		"restrict",
		"exports",
		"_default",
		"makeModifier"
	],
	"sources": [
		"pointer.ts"
	],
	"sourcesContent": [
		"import type Interaction from '@interactjs/core/Interaction'\nimport type { RectResolvable, Rect, Point } from '@interactjs/core/types'\nimport extend from '@interactjs/utils/extend'\nimport is from '@interactjs/utils/is'\nimport * as rectUtils from '@interactjs/utils/rect'\n\nimport { makeModifier } from '../base'\nimport type { ModifierArg, ModifierModule, ModifierState } from '../types'\n\nexport interface RestrictOptions {\n  // where to drag over\n  restriction: RectResolvable<[number, number, Interaction]>\n  // what part of self is allowed to drag over\n  elementRect: Rect\n  offset: Rect\n  // restrict just before the end drag\n  endOnly: boolean\n  enabled?: boolean\n}\n\nexport type RestrictState = ModifierState<\n  RestrictOptions,\n  {\n    offset: Rect\n  }\n>\n\nfunction start({ rect, startOffset, state, interaction, pageCoords }: ModifierArg<RestrictState>) {\n  const { options } = state\n  const { elementRect } = options\n  const offset: Rect = extend(\n    {\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0,\n    },\n    options.offset || {},\n  )\n\n  if (rect && elementRect) {\n    const restriction = getRestrictionRect(options.restriction, interaction, pageCoords)\n\n    if (restriction) {\n      const widthDiff = restriction.right - restriction.left - rect.width\n      const heightDiff = restriction.bottom - restriction.top - rect.height\n\n      if (widthDiff < 0) {\n        offset.left += widthDiff\n        offset.right += widthDiff\n      }\n      if (heightDiff < 0) {\n        offset.top += heightDiff\n        offset.bottom += heightDiff\n      }\n    }\n\n    offset.left += startOffset.left - rect.width * elementRect.left\n    offset.top += startOffset.top - rect.height * elementRect.top\n\n    offset.right += startOffset.right - rect.width * (1 - elementRect.right)\n    offset.bottom += startOffset.bottom - rect.height * (1 - elementRect.bottom)\n  }\n\n  state.offset = offset\n}\n\nfunction set({ coords, interaction, state }: ModifierArg<RestrictState>) {\n  const { options, offset } = state\n\n  const restriction = getRestrictionRect(options.restriction, interaction, coords)\n\n  if (!restriction) return\n\n  const rect = rectUtils.xywhToTlbr(restriction)\n\n  coords.x = Math.max(Math.min(rect.right - offset.right, coords.x), rect.left + offset.left)\n  coords.y = Math.max(Math.min(rect.bottom - offset.bottom, coords.y), rect.top + offset.top)\n}\n\nexport function getRestrictionRect(\n  value: RectResolvable<[number, number, Interaction]>,\n  interaction: Interaction,\n  coords?: Point,\n) {\n  if (is.func(value)) {\n    return rectUtils.resolveRectLike(value, interaction.interactable, interaction.element, [\n      coords.x,\n      coords.y,\n      interaction,\n    ])\n  } else {\n    return rectUtils.resolveRectLike(value, interaction.interactable, interaction.element)\n  }\n}\n\nconst defaults: RestrictOptions = {\n  restriction: null,\n  elementRect: null,\n  offset: null,\n  endOnly: false,\n  enabled: false,\n}\n\nconst restrict: ModifierModule<RestrictOptions, RestrictState> = {\n  start,\n  set,\n  defaults,\n}\n\nexport default makeModifier(restrict, 'restrict')\nexport { restrict }\n"
	],
	"mappings": "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"
}