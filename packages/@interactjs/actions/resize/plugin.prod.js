Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=((e,t)=>{if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=s?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i})(require("../../utils/domUtils.prod.js")),t=i(require("../../utils/extend.prod.js")),r=i(require("../../utils/is.prod.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=e=>e?r:t)(e)}function s(t,i,o,s,n,a,l){if(!i)return!1;if(!0===i){const e=r.default.number(a.width)?a.width:a.right-a.left,i=r.default.number(a.height)?a.height:a.bottom-a.top;if(l=Math.min(l,Math.abs(("left"===t||"right"===t?e:i)/2)),e<0&&("left"===t?t="right":"right"===t&&(t="left")),i<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t){const t=e>=0?a.left:a.right;return o.x<t+l}if("top"===t){const e=i>=0?a.top:a.bottom;return o.y<e+l}if("right"===t)return o.x>(e>=0?a.right:a.left)-l;if("bottom"===t)return o.y>(i>=0?a.bottom:a.top)-l}return!!r.default.element(s)&&(r.default.element(i)?i===s:e.matchesUpTo(s,i,n))}function n({iEvent:e,interaction:t}){if("resize"!==t.prepared.name||!t.resizeAxes)return;const r=e;t.interactable.options.resize.square?("y"===t.resizeAxes?r.delta.x=r.delta.y:r.delta.y=r.delta.x,r.axes="xy"):(r.axes=t.resizeAxes,"x"===t.resizeAxes?r.delta.y=0:"y"===t.resizeAxes&&(r.delta.x=0))}const a={id:"actions/resize",before:["actions/drag"],install(e){const{actions:t,browser:i,Interactable:o,defaults:s}=e;a.cursors=(e=>e.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"})(i),a.defaultMargin=i.supportsTouch||i.supportsPointerEvent?20:10,o.prototype.resizable=function(t){return((e,t,i)=>r.default.object(t)?(e.options.resize.enabled=!1!==t.enabled,e.setPerAction("resize",t),e.setOnEvents("resize",t),r.default.string(t.axis)&&/^x$|^y$|^xy$/.test(t.axis)?e.options.resize.axis=t.axis:null===t.axis&&(e.options.resize.axis=i.defaults.actions.resize.axis),r.default.bool(t.preserveAspectRatio)?e.options.resize.preserveAspectRatio=t.preserveAspectRatio:r.default.bool(t.square)&&(e.options.resize.square=t.square),e):r.default.bool(t)?(e.options.resize.enabled=t,e):e.options.resize)(this,t,e)},t.map.resize=a,t.methodDict.resize="resizable",s.actions.resize=a.defaults},listeners:{"interactions:new"({interaction:e}){e.resizeAxes="xy"},"interactions:action-start"(e){(({iEvent:e,interaction:r})=>{if("resize"!==r.prepared.name||!r.prepared.edges)return;const i=e,o=r.rect;r._rects={start:(0,t.default)({},o),corrected:(0,t.default)({},o),previous:(0,t.default)({},o),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},i.edges=r.prepared.edges,i.rect=r._rects.corrected,i.deltaRect=r._rects.delta})(e),n(e)},"interactions:action-move"(e){(({iEvent:e,interaction:r})=>{if("resize"!==r.prepared.name||!r.prepared.edges)return;const i=e,o=r.interactable.options.resize.invert,s="reposition"===o||"negate"===o,n=r.rect,{start:a,corrected:l,delta:p,previous:c}=r._rects;if((0,t.default)(c,l),s){if((0,t.default)(l,n),"reposition"===o){if(l.top>l.bottom){const e=l.top;l.top=l.bottom,l.bottom=e}if(l.left>l.right){const e=l.left;l.left=l.right,l.right=e}}}else l.top=Math.min(n.top,a.bottom),l.bottom=Math.max(n.bottom,a.top),l.left=Math.min(n.left,a.right),l.right=Math.max(n.right,a.left);l.width=l.right-l.left,l.height=l.bottom-l.top;for(const e in l)p[e]=l[e]-c[e];i.edges=r.prepared.edges,i.rect=l,i.deltaRect=p})(e),n(e)},"interactions:action-end"({iEvent:e,interaction:t}){if("resize"!==t.prepared.name||!t.prepared.edges)return;const r=e;r.edges=t.prepared.edges,r.rect=t._rects.corrected,r.deltaRect=t._rects.delta},"auto-start:check"(e){const{interaction:i,interactable:o,element:n,rect:l,buttons:p}=e;if(!l)return;const c=(0,t.default)({},i.coords.cur.page),f=o.options.resize;if(f&&f.enabled&&(!i.pointerIsDown||!/mouse|pointer/.test(i.pointerType)||0!=(p&f.mouseButtons))){if(r.default.object(f.edges)){const t={left:!1,right:!1,top:!1,bottom:!1};for(const e in t)t[e]=s(e,f.edges[e],c,i._latestPointer.eventTarget,n,l,f.margin||a.defaultMargin);t.left=t.left&&!t.right,t.top=t.top&&!t.bottom,(t.left||t.right||t.top||t.bottom)&&(e.action={name:"resize",edges:t})}else{const t="y"!==f.axis&&c.x>l.right-a.defaultMargin,r="x"!==f.axis&&c.y>l.bottom-a.defaultMargin;(t||r)&&(e.action={name:"resize",axes:(t?"x":"")+(r?"y":"")})}return!e.action&&void 0}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor({edges:e,axis:t,name:r}){const i=a.cursors;let o=null;if(t)o=i[r+t];else if(e){let t="";for(const r of["top","bottom","left","right"])e[r]&&(t+=r);o=i[t]}return o},filterEventType:e=>0===e.search("resize"),defaultMargin:null};exports.default=a;
//# sourceMappingURL=plugin.prod.js.map