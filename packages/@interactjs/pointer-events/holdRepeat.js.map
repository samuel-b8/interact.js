{
	"version": 3,
	"names": [
		"basePlugin",
		"install",
		"scope",
		"usePlugin",
		"pointerEvents",
		"defaults",
		"holdRepeatInterval",
		"types",
		"holdrepeat",
		"actions",
		"phaselessTypes",
		"onNew",
		"pointerEvent",
		"type",
		"count",
		"onFired",
		"interaction",
		"eventTarget",
		"targets",
		"length",
		"interval",
		"eventable",
		"options",
		"holdIntervalHandle",
		"setTimeout",
		"fire",
		"pointer",
		"event",
		"endHoldRepeat",
		"clearInterval",
		"holdRepeat",
		"id",
		"listeners",
		"reduce",
		"acc",
		"enderTypes"
	],
	"sources": [
		"holdRepeat.ts"
	],
	"sourcesContent": [
		"import type Interaction from '@interactjs/core/Interaction'\nimport type { ListenerMap, Scope, SignalArgs, Plugin } from '@interactjs/core/scope'\n\n/* eslint-disable import/no-duplicates -- for typescript module augmentations */\nimport './base'\nimport basePlugin from './base'\n/* eslint-enable import/no-duplicates */\nimport { type PointerEvent } from './PointerEvent'\n\ndeclare module '@interactjs/core/Interaction' {\n  interface Interaction {\n    holdIntervalHandle?: any\n  }\n}\n\ndeclare module '@interactjs/pointer-events/PointerEvent' {\n  interface PointerEvent<T extends string = any> {\n    count?: number\n  }\n}\n\ndeclare module '@interactjs/pointer-events/base' {\n  interface PointerEventOptions {\n    holdRepeatInterval?: number\n  }\n}\n\nfunction install(scope: Scope) {\n  scope.usePlugin(basePlugin)\n\n  const { pointerEvents } = scope\n\n  // don't repeat by default\n  pointerEvents.defaults.holdRepeatInterval = 0\n  pointerEvents.types.holdrepeat = scope.actions.phaselessTypes.holdrepeat = true\n}\n\nfunction onNew({ pointerEvent }: { pointerEvent: PointerEvent<any> }) {\n  if (pointerEvent.type !== 'hold') return\n\n  pointerEvent.count = (pointerEvent.count || 0) + 1\n}\n\nfunction onFired(\n  { interaction, pointerEvent, eventTarget, targets }: SignalArgs['pointerEvents:fired'],\n  scope: Scope,\n) {\n  if (pointerEvent.type !== 'hold' || !targets.length) return\n\n  // get the repeat interval from the first eventable\n  const interval = targets[0].eventable.options.holdRepeatInterval\n\n  // don't repeat if the interval is 0 or less\n  if (interval <= 0) return\n\n  // set a timeout to fire the holdrepeat event\n  interaction.holdIntervalHandle = setTimeout(() => {\n    scope.pointerEvents.fire(\n      {\n        interaction,\n        eventTarget,\n        type: 'hold',\n        pointer: pointerEvent,\n        event: pointerEvent,\n      },\n      scope,\n    )\n  }, interval)\n}\n\nfunction endHoldRepeat({ interaction }: { interaction: Interaction }) {\n  // set the interaction's holdStopTime property\n  // to stop further holdRepeat events\n  if (interaction.holdIntervalHandle) {\n    clearInterval(interaction.holdIntervalHandle)\n    interaction.holdIntervalHandle = null\n  }\n}\n\nconst holdRepeat: Plugin = {\n  id: 'pointer-events/holdRepeat',\n  install,\n  listeners: ['move', 'up', 'cancel', 'endall'].reduce(\n    (acc, enderTypes) => {\n      ;(acc as any)[`pointerEvents:${enderTypes}`] = endHoldRepeat\n      return acc\n    },\n    {\n      'pointerEvents:new': onNew,\n      'pointerEvents:fired': onFired,\n    } as ListenerMap,\n  ),\n}\n\nexport default holdRepeat\n"
	],
	"mappings": "AAGA;AACA,OAAO,QAAQ;AACf,OAAOA,UAAU,MAAM,QAAQ;AAC/B;;AAqBA,SAASC,OAAOA,CAACC,KAAY,EAAE;EAC7BA,KAAK,CAACC,SAAS,CAACH,UAAU,CAAC;EAE3B,MAAM;IAAEI;EAAc,CAAC,GAAGF,KAAK;;EAE/B;EACAE,aAAa,CAACC,QAAQ,CAACC,kBAAkB,GAAG,CAAC;EAC7CF,aAAa,CAACG,KAAK,CAACC,UAAU,GAAGN,KAAK,CAACO,OAAO,CAACC,cAAc,CAACF,UAAU,GAAG,IAAI;AACjF;AAEA,SAASG,KAAKA,CAAC;EAAEC;AAAkD,CAAC,EAAE;EACpE,IAAIA,YAAY,CAACC,IAAI,KAAK,MAAM,EAAE;EAElCD,YAAY,CAACE,KAAK,GAAG,CAACF,YAAY,CAACE,KAAK,IAAI,CAAC,IAAI,CAAC;AACpD;AAEA,SAASC,OAAOA,CACd;EAAEC,WAAW;EAAEJ,YAAY;EAAEK,WAAW;EAAEC;AAA2C,CAAC,EACtFhB,KAAY,EACZ;EACA,IAAIU,YAAY,CAACC,IAAI,KAAK,MAAM,IAAI,CAACK,OAAO,CAACC,MAAM,EAAE;;EAErD;EACA,MAAMC,QAAQ,GAAGF,OAAO,CAAC,CAAC,CAAC,CAACG,SAAS,CAACC,OAAO,CAAChB,kBAAkB;;EAEhE;EACA,IAAIc,QAAQ,IAAI,CAAC,EAAE;;EAEnB;EACAJ,WAAW,CAACO,kBAAkB,GAAGC,UAAU,CAAC,MAAM;IAChDtB,KAAK,CAACE,aAAa,CAACqB,IAAI,CACtB;MACET,WAAW;MACXC,WAAW;MACXJ,IAAI,EAAE,MAAM;MACZa,OAAO,EAAEd,YAAY;MACrBe,KAAK,EAAEf;IACT,CAAC,EACDV,KACF,CAAC;EACH,CAAC,EAAEkB,QAAQ,CAAC;AACd;AAEA,SAASQ,aAAaA,CAAC;EAAEZ;AAA0C,CAAC,EAAE;EACpE;EACA;EACA,IAAIA,WAAW,CAACO,kBAAkB,EAAE;IAClCM,aAAa,CAACb,WAAW,CAACO,kBAAkB,CAAC;IAC7CP,WAAW,CAACO,kBAAkB,GAAG,IAAI;EACvC;AACF;AAEA,MAAMO,UAAkB,GAAG;EACzBC,EAAE,EAAE,2BAA2B;EAC/B9B,OAAO;EACP+B,SAAS,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAACC,MAAM,CAClD,CAACC,GAAG,EAAEC,UAAU,KAAK;IACnB;IAAED,GAAG,CAAU,iBAAgBC,UAAW,EAAC,CAAC,GAAGP,aAAa;IAC5D,OAAOM,GAAG;EACZ,CAAC,EACD;IACE,mBAAmB,EAAEvB,KAAK;IAC1B,qBAAqB,EAAEI;EACzB,CACF;AACF,CAAC;AAED,eAAee,UAAU"
}