Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=((e,t)=>{if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var p=r?Object.getOwnPropertyDescriptor(e,a):null;p&&(p.get||p.set)?Object.defineProperty(o,a,p):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o})(require("../utils/domUtils.prod.js")),t=r(require("../utils/extend.prod.js")),n=r(require("../utils/getOriginXY.prod.js")),o=require("./PointerEvent");function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=e=>e?n:t)(e)}const a={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install(e){e.pointerEvents=a,e.defaults.actions.pointerEvents=a.defaults,(0,t.default)(e.actions.phaselessTypes,a.types)},listeners:{"interactions:new"({interaction:e}){e.prevTap=null,e.tapTime=0},"interactions:update-pointer"({down:e,pointerInfo:t}){!e&&t.hold||(t.hold={duration:1/0,timeout:null})},"interactions:move"(e,t){const{interaction:n,pointer:o,event:r,eventTarget:i,duplicate:a}=e;a||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&l(e),p({interaction:n,pointer:o,event:r,eventTarget:i,type:"move"},t))},"interactions:down"(t,n){(({interaction:t,pointer:n,event:o,eventTarget:r,pointerIndex:i},a)=>{const s=t.pointers[i].hold,l=e.getPath(r),u={interaction:t,pointer:n,event:o,eventTarget:r,type:"hold",targets:[],path:l,node:null};for(const e of l)u.node=e,a.fire("pointerEvents:collect-targets",u);if(!u.targets.length)return;let c=1/0;for(const e of u.targets){const t=e.eventable.options.holdDuration;t<c&&(c=t)}s.duration=c,s.timeout=setTimeout((()=>{p({interaction:t,eventTarget:r,pointer:n,event:o,type:"hold"},a)}),c)})(t,n),p(t,n)},"interactions:up"(e,t){l(e),p(e,t),(({interaction:e,pointer:t,event:n,eventTarget:o},r)=>{e.pointerWasMoved||p({interaction:e,eventTarget:o,pointer:t,event:n,type:"tap"},r)})(e,t)},"interactions:cancel"(e,t){l(e),p(e,t)}},PointerEvent:o.PointerEvent,fire:p,collectEventTargets:s,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function p(e,t){const{interaction:r,pointer:i,event:a,eventTarget:l,type:u,targets:c=s(e,t)}=e,d=new o.PointerEvent(u,i,a,l,r,t.now());t.fire("pointerEvents:new",{pointerEvent:d});const v={interaction:r,pointer:i,event:a,eventTarget:l,targets:c,type:u,pointerEvent:d};for(let e=0;e<c.length;e++){const t=c[e];for(const e in t.props||{})d[e]=t.props[e];const o=(0,n.default)(t.eventable,t.node);if(d._subtractOrigin(o),d.eventable=t.eventable,d.currentTarget=t.node,t.eventable.fire(d),d._addOrigin(o),d.immediatePropagationStopped||d.propagationStopped&&e+1<c.length&&c[e+1].node!==d.currentTarget)break}if(t.fire("pointerEvents:fired",v),"tap"===u){const e=d.double?p({interaction:r,pointer:i,event:a,eventTarget:l,type:"doubletap"},t):d;r.prevTap=e,r.tapTime=e.timeStamp}return d}function s({interaction:t,pointer:n,event:o,eventTarget:r,type:i},a){const p=t.getPointerIndex(n),s=t.pointers[p];if("tap"===i&&(t.pointerWasMoved||!s||s.downTarget!==r))return[];const l=e.getPath(r),u={interaction:t,pointer:n,event:o,eventTarget:r,type:i,path:l,targets:[],node:null};for(const e of l)u.node=e,a.fire("pointerEvents:collect-targets",u);return"hold"===i&&(u.targets=u.targets.filter((e=>{var n,o;return e.eventable.options.holdDuration===(null==(n=t.pointers[p])||null==(o=n.hold)?void 0:o.duration)}))),u.targets}function l({interaction:e,pointerIndex:t}){const n=e.pointers[t].hold;n&&n.timeout&&(clearTimeout(n.timeout),n.timeout=null)}exports.default=a;
//# sourceMappingURL=base.prod.js.map