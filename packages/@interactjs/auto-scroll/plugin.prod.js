Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.getContainer=c,exports.getScroll=s,exports.getScrollSize=e=>(t.default.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}),exports.getScrollSizeDelta=({interaction:e,element:t},n)=>{const r=e&&e.interactable.options[e.prepared.name].autoScroll;if(!r||!r.enabled)return n(),{x:0,y:0};const o=c(r.container,e.interactable,t),i=s(o);n();const l=s(o);return{x:l.x-i.x,y:l.y-i.y}};var e=((e,t)=>{if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r})(require("../utils/domUtils.prod.js")),t=i(require("../utils/is.prod.js")),n=i(require("../utils/raf.prod.js")),r=require("../utils/rect.prod.js"),o=require("../utils/window.prod.js");function i(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=e=>e?n:t)(e)}const a={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start(e){a.isScrolling=!0,n.default.cancel(a.i),e.autoScroll=a,a.interaction=e,a.prevTime=a.now(),a.i=n.default.request(a.scroll)},stop(){a.isScrolling=!1,a.interaction&&(a.interaction.autoScroll=null),n.default.cancel(a.i)},scroll(){const{interaction:e}=a,{interactable:r,element:o}=e,i=e.prepared.name,l=r.options[i].autoScroll,u=c(l.container,r,o),d=a.now(),p=(d-a.prevTime)/1e3,f=l.speed*p;if(f>=1){const n={x:a.x*f,y:a.y*f};if(n.x||n.y){const i=s(u);t.default.window(u)?u.scrollBy(n.x,n.y):u&&(u.scrollLeft+=n.x,u.scrollTop+=n.y);const l=s(u),a={x:l.x-i.x,y:l.y-i.y};(a.x||a.y)&&r.fire({type:"autoscroll",target:o,interactable:r,delta:a,interaction:e,container:u})}a.prevTime=d}a.isScrolling&&(n.default.cancel(a.i),a.i=n.default.request(a.scroll))},check(e,t){var n;return null==(n=e.options[t].autoScroll)?void 0:n.enabled},onInteractionMove({interaction:n,pointer:r}){if(!n.interacting()||!a.check(n.interactable,n.prepared.name))return;if(n.simulation)return void(a.x=a.y=0);let o,i,l,s;const{interactable:u,element:d}=n,p=n.prepared.name,f=u.options[p].autoScroll,g=c(f.container,u,d);if(t.default.window(g))s=r.clientX<a.margin,o=r.clientY<a.margin,i=r.clientX>g.innerWidth-a.margin,l=r.clientY>g.innerHeight-a.margin;else{const t=e.getElementClientRect(g);s=r.clientX<t.left+a.margin,o=r.clientY<t.top+a.margin,i=r.clientX>t.right-a.margin,l=r.clientY>t.bottom-a.margin}a.x=i?1:s?-1:0,a.y=l?1:o?-1:0,a.isScrolling||(a.margin=f.margin,a.speed=f.speed,a.start(n))}};function c(e,n,i){return(t.default.string(e)?(0,r.getStringOptionResult)(e,n,i):e)||(0,o.getWindow)(i)}function s(e){return t.default.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}const u={id:"auto-scroll",install(e){const{defaults:t,actions:n}=e;e.autoScroll=a,a.now=()=>e.now(),n.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=a.defaults},listeners:{"interactions:new"({interaction:e}){e.autoScroll=null},"interactions:destroy"({interaction:e}){e.autoScroll=null,a.stop(),a.interaction&&(a.interaction=null)},"interactions:stop":a.stop,"interactions:action-move":e=>a.onInteractionMove(e)}};exports.default=u;
//# sourceMappingURL=plugin.prod.js.map