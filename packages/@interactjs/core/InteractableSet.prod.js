Object.defineProperty(exports,"__esModule",{value:!0}),exports.InteractableSet=void 0;var e=n(require("../utils/arr.prod.js")),t=n(require("../utils/domUtils.prod.js")),r=i(require("../utils/extend.prod.js")),s=i(require("../utils/is.prod.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=e=>e?r:t)(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var s={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=i?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(s,n,c):s[n]=e[n]}return s.default=e,r&&r.set(e,s),s}exports.InteractableSet=class{list=[];selectorMap={};scope;constructor(t){this.scope=t,t.addListeners({"interactable:unset":({interactable:t})=>{const{target:r}=t,i=s.default.string(r)?this.selectorMap[r]:r[this.scope.id],o=e.findIndex(i,(e=>e===t));i.splice(o,1)}})}new(e,t){t=(0,r.default)(t||{},{actions:this.scope.actions});const i=new this.scope.Interactable(e,t,this.scope.document,this.scope.events);return this.scope.addDocument(i._doc),this.list.push(i),s.default.string(e)?(this.selectorMap[e]||(this.selectorMap[e]=[]),this.selectorMap[e].push(i)):(i.target[this.scope.id]||Object.defineProperty(e,this.scope.id,{value:[],configurable:!0}),e[this.scope.id].push(i)),this.scope.fire("interactable:new",{target:e,options:t,interactable:i,win:this.scope._win}),i}getExisting(t,r){const i=r&&r.context||this.scope.document,o=s.default.string(t),n=o?this.selectorMap[t]:t[this.scope.id];if(n)return e.find(n,(e=>e._context===i&&(o||e.inContext(t))))}forEachMatch(e,r){for(const i of this.list){let o;if((s.default.string(i.target)?s.default.element(e)&&t.matchesSelector(e,i.target):e===i.target)&&i.inContext(e)&&(o=r(i)),void 0!==o)return o}}};
//# sourceMappingURL=InteractableSet.prod.js.map