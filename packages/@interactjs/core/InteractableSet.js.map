{
	"version": 3,
	"names": [
		"arr",
		"_interopRequireWildcard",
		"require",
		"domUtils",
		"_extend",
		"_interopRequireDefault",
		"_is",
		"obj",
		"__esModule",
		"default",
		"_getRequireWildcardCache",
		"e",
		"WeakMap",
		"r",
		"t",
		"has",
		"get",
		"n",
		"__proto__",
		"a",
		"Object",
		"defineProperty",
		"getOwnPropertyDescriptor",
		"u",
		"prototype",
		"hasOwnProperty",
		"call",
		"i",
		"set",
		"InteractableSet",
		"list",
		"selectorMap",
		"scope",
		"constructor",
		"addListeners",
		"interactable:unset",
		"interactable",
		"target",
		"interactablesOnTarget",
		"is",
		"string",
		"id",
		"targetIndex",
		"findIndex",
		"splice",
		"new",
		"options",
		"extend",
		"actions",
		"Interactable",
		"document",
		"events",
		"addDocument",
		"_doc",
		"push",
		"value",
		"configurable",
		"fire",
		"win",
		"_win",
		"getExisting",
		"context",
		"isSelector",
		"undefined",
		"find",
		"_context",
		"inContext",
		"forEachMatch",
		"node",
		"callback",
		"ret",
		"element",
		"matchesSelector",
		"exports"
	],
	"sources": [
		"InteractableSet.ts"
	],
	"sourcesContent": [
		"import * as arr from '@interactjs/utils/arr'\nimport * as domUtils from '@interactjs/utils/domUtils'\nimport extend from '@interactjs/utils/extend'\nimport is from '@interactjs/utils/is'\n\nimport type { Interactable } from '@interactjs/core/Interactable'\nimport type { OptionsArg, Options } from '@interactjs/core/options'\nimport type { Scope } from '@interactjs/core/scope'\nimport type { Target } from '@interactjs/core/types'\n\ndeclare module '@interactjs/core/scope' {\n  interface SignalArgs {\n    'interactable:new': {\n      interactable: Interactable\n      target: Target\n      options: OptionsArg\n      win: Window\n    }\n  }\n}\n\nexport class InteractableSet {\n  // all set interactables\n  list: Interactable[] = []\n\n  selectorMap: {\n    [selector: string]: Interactable[]\n  } = {}\n\n  scope: Scope\n\n  constructor(scope: Scope) {\n    this.scope = scope\n    scope.addListeners({\n      'interactable:unset': ({ interactable }) => {\n        const { target } = interactable\n        const interactablesOnTarget: Interactable[] = is.string(target)\n          ? this.selectorMap[target]\n          : (target as any)[this.scope.id]\n\n        const targetIndex = arr.findIndex(interactablesOnTarget, (i) => i === interactable)\n        interactablesOnTarget.splice(targetIndex, 1)\n      },\n    })\n  }\n\n  new(target: Target, options?: any): Interactable {\n    options = extend(options || {}, {\n      actions: this.scope.actions,\n    })\n    const interactable = new this.scope.Interactable(target, options, this.scope.document, this.scope.events)\n\n    this.scope.addDocument(interactable._doc)\n    this.list.push(interactable)\n\n    if (is.string(target)) {\n      if (!this.selectorMap[target]) {\n        this.selectorMap[target] = []\n      }\n      this.selectorMap[target].push(interactable)\n    } else {\n      if (!(interactable.target as any)[this.scope.id]) {\n        Object.defineProperty(target, this.scope.id, {\n          value: [],\n          configurable: true,\n        })\n      }\n\n      ;(target as any)[this.scope.id].push(interactable)\n    }\n\n    this.scope.fire('interactable:new', {\n      target,\n      options,\n      interactable,\n      win: this.scope._win,\n    })\n\n    return interactable\n  }\n\n  getExisting(target: Target, options?: Options) {\n    const context = (options && options.context) || this.scope.document\n    const isSelector = is.string(target)\n    const interactablesOnTarget: Interactable[] = isSelector\n      ? this.selectorMap[target as string]\n      : (target as any)[this.scope.id]\n\n    if (!interactablesOnTarget) return undefined\n\n    return arr.find(\n      interactablesOnTarget,\n      (interactable) =>\n        interactable._context === context && (isSelector || interactable.inContext(target as any)),\n    )\n  }\n\n  forEachMatch<T>(node: Node, callback: (interactable: Interactable) => T): T | void {\n    for (const interactable of this.list) {\n      let ret: T\n\n      if (\n        (is.string(interactable.target)\n          ? // target is a selector and the element matches\n            is.element(node) && domUtils.matchesSelector(node, interactable.target)\n          : // target is the element\n            node === interactable.target) &&\n        // the element is in context\n        interactable.inContext(node)\n      ) {\n        ret = callback(interactable)\n      }\n\n      if (ret !== undefined) {\n        return ret\n      }\n    }\n  }\n}\n"
	],
	"mappings": "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"
}