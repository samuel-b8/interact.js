{
	"version": 3,
	"names": [
		"arr",
		"_interopRequireWildcard",
		"require",
		"domUtils",
		"_is",
		"_interopRequireDefault",
		"_pointerExtend",
		"pointerUtils",
		"obj",
		"__esModule",
		"default",
		"_getRequireWildcardCache",
		"e",
		"WeakMap",
		"r",
		"t",
		"has",
		"get",
		"n",
		"__proto__",
		"a",
		"Object",
		"defineProperty",
		"getOwnPropertyDescriptor",
		"u",
		"prototype",
		"hasOwnProperty",
		"call",
		"i",
		"set",
		"install",
		"scope",
		"_scope$document",
		"targets",
		"delegatedEvents",
		"documents",
		"eventsMethods",
		"add",
		"remove",
		"addDelegate",
		"removeDelegate",
		"delegateListener",
		"delegateUseCapture",
		"supportsOptions",
		"supportsPassive",
		"document",
		"createElement",
		"addEventListener",
		"capture",
		"passive",
		"events",
		"eventTarget",
		"type",
		"listener",
		"optionalArg",
		"options",
		"getOptions",
		"target",
		"find",
		"push",
		"l",
		"func",
		"optionsMatch",
		"removeEventListener",
		"targetIndex",
		"findIndex",
		"typeIsEmpty",
		"typeListeners",
		"length",
		"entry",
		"splice",
		"keys",
		"selector",
		"context",
		"doc",
		"delegates",
		"delegate",
		"d",
		"listeners",
		"matchFound",
		"index",
		"cur",
		"event",
		"fakeEvent",
		"FakeEvent",
		"getEventTargets",
		"element",
		"is",
		"matchesSelector",
		"nodeContains",
		"currentTarget",
		"parentNode",
		"originalEvent",
		"constructor",
		"pExtend",
		"preventOriginalDefault",
		"preventDefault",
		"stopPropagation",
		"stopImmediatePropagation",
		"param",
		"object",
		"b",
		"_default",
		"exports",
		"id"
	],
	"sources": [
		"events.ts"
	],
	"sourcesContent": [
		"import * as arr from '@interactjs/utils/arr'\nimport * as domUtils from '@interactjs/utils/domUtils'\nimport is from '@interactjs/utils/is'\nimport pExtend from '@interactjs/utils/pointerExtend'\nimport * as pointerUtils from '@interactjs/utils/pointerUtils'\n\nimport type { Scope } from '@interactjs/core/scope'\nimport type { Element } from '@interactjs/core/types'\n\nimport type { NativeEventTarget } from './NativeTypes'\n\ndeclare module '@interactjs/core/scope' {\n  interface Scope {\n    events: ReturnType<typeof install>\n  }\n}\n\ninterface EventOptions {\n  capture: boolean\n  passive: boolean\n}\n\ntype PartialEventTarget = Partial<NativeEventTarget>\n\ntype ListenerEntry = { func: (event: Event | FakeEvent) => any; options: EventOptions }\n\nfunction install(scope: Scope) {\n  const targets: Array<{\n    eventTarget: PartialEventTarget\n    events: { [type: string]: ListenerEntry[] }\n  }> = []\n\n  const delegatedEvents: {\n    [type: string]: Array<{\n      selector: string\n      context: Node\n      listeners: ListenerEntry[]\n    }>\n  } = {}\n  const documents: Document[] = []\n\n  const eventsMethods = {\n    add,\n    remove,\n\n    addDelegate,\n    removeDelegate,\n\n    delegateListener,\n    delegateUseCapture,\n    delegatedEvents,\n    documents,\n\n    targets,\n\n    supportsOptions: false,\n    supportsPassive: false,\n  }\n\n  // check if browser supports passive events and options arg\n  scope.document?.createElement('div').addEventListener('test', null, {\n    get capture() {\n      return (eventsMethods.supportsOptions = true)\n    },\n    get passive() {\n      return (eventsMethods.supportsPassive = true)\n    },\n  })\n\n  scope.events = eventsMethods\n\n  function add(\n    eventTarget: PartialEventTarget,\n    type: string,\n    listener: ListenerEntry['func'],\n    optionalArg?: boolean | EventOptions,\n  ) {\n    if (!eventTarget.addEventListener) return\n\n    const options = getOptions(optionalArg)\n    let target = arr.find(targets, (t) => t.eventTarget === eventTarget)\n\n    if (!target) {\n      target = {\n        eventTarget,\n        events: {},\n      }\n\n      targets.push(target)\n    }\n\n    if (!target.events[type]) {\n      target.events[type] = []\n    }\n\n    if (!arr.find(target.events[type], (l) => l.func === listener && optionsMatch(l.options, options))) {\n      eventTarget.addEventListener(\n        type,\n        listener as any,\n        eventsMethods.supportsOptions ? options : options.capture,\n      )\n      target.events[type].push({ func: listener, options })\n    }\n  }\n\n  function remove(\n    eventTarget: PartialEventTarget,\n    type: string,\n    listener?: 'all' | ListenerEntry['func'],\n    optionalArg?: boolean | EventOptions,\n  ) {\n    if (!eventTarget.addEventListener || !eventTarget.removeEventListener) return\n\n    const targetIndex = arr.findIndex(targets, (t) => t.eventTarget === eventTarget)\n    const target = targets[targetIndex]\n\n    if (!target || !target.events) {\n      return\n    }\n\n    if (type === 'all') {\n      for (type in target.events) {\n        if (target.events.hasOwnProperty(type)) {\n          remove(eventTarget, type, 'all')\n        }\n      }\n      return\n    }\n\n    let typeIsEmpty = false\n    const typeListeners = target.events[type]\n\n    if (typeListeners) {\n      if (listener === 'all') {\n        for (let i = typeListeners.length - 1; i >= 0; i--) {\n          const entry = typeListeners[i]\n          remove(eventTarget, type, entry.func, entry.options)\n        }\n        return\n      } else {\n        const options = getOptions(optionalArg)\n\n        for (let i = 0; i < typeListeners.length; i++) {\n          const entry = typeListeners[i]\n          if (entry.func === listener && optionsMatch(entry.options, options)) {\n            eventTarget.removeEventListener(\n              type,\n              listener as any,\n              eventsMethods.supportsOptions ? options : options.capture,\n            )\n            typeListeners.splice(i, 1)\n\n            if (typeListeners.length === 0) {\n              delete target.events[type]\n              typeIsEmpty = true\n            }\n\n            break\n          }\n        }\n      }\n    }\n\n    if (typeIsEmpty && !Object.keys(target.events).length) {\n      targets.splice(targetIndex, 1)\n    }\n  }\n\n  function addDelegate(\n    selector: string,\n    context: Node,\n    type: string,\n    listener: ListenerEntry['func'],\n    optionalArg?: any,\n  ) {\n    const options = getOptions(optionalArg)\n    if (!delegatedEvents[type]) {\n      delegatedEvents[type] = []\n\n      // add delegate listener functions\n      for (const doc of documents) {\n        add(doc, type, delegateListener)\n        add(doc, type, delegateUseCapture, true)\n      }\n    }\n\n    const delegates = delegatedEvents[type]\n    let delegate = arr.find(delegates, (d) => d.selector === selector && d.context === context)\n\n    if (!delegate) {\n      delegate = { selector, context, listeners: [] }\n      delegates.push(delegate)\n    }\n\n    delegate.listeners.push({ func: listener, options })\n  }\n\n  function removeDelegate(\n    selector: string,\n    context: Document | Element,\n    type: string,\n    listener?: ListenerEntry['func'],\n    optionalArg?: any,\n  ) {\n    const options = getOptions(optionalArg)\n    const delegates = delegatedEvents[type]\n    let matchFound = false\n    let index: number\n\n    if (!delegates) return\n\n    // count from last index of delegated to 0\n    for (index = delegates.length - 1; index >= 0; index--) {\n      const cur = delegates[index]\n      // look for matching selector and context Node\n      if (cur.selector === selector && cur.context === context) {\n        const { listeners } = cur\n\n        // each item of the listeners array is an array: [function, capture, passive]\n        for (let i = listeners.length - 1; i >= 0; i--) {\n          const entry = listeners[i]\n\n          // check if the listener functions and capture and passive flags match\n          if (entry.func === listener && optionsMatch(entry.options, options)) {\n            // remove the listener from the array of listeners\n            listeners.splice(i, 1)\n\n            // if all listeners for this target have been removed\n            // remove the target from the delegates array\n            if (!listeners.length) {\n              delegates.splice(index, 1)\n\n              // remove delegate function from context\n              remove(context, type, delegateListener)\n              remove(context, type, delegateUseCapture, true)\n            }\n\n            // only remove one listener\n            matchFound = true\n            break\n          }\n        }\n\n        if (matchFound) {\n          break\n        }\n      }\n    }\n  }\n\n  // bound to the interactable context when a DOM event\n  // listener is added to a selector interactable\n  function delegateListener(event: Event | FakeEvent, optionalArg?: any) {\n    const options = getOptions(optionalArg)\n    const fakeEvent = new FakeEvent(event as Event)\n    const delegates = delegatedEvents[event.type]\n    const [eventTarget] = pointerUtils.getEventTargets(event as Event)\n    let element: Node = eventTarget\n\n    // climb up document tree looking for selector matches\n    while (is.element(element)) {\n      for (let i = 0; i < delegates.length; i++) {\n        const cur = delegates[i]\n        const { selector, context } = cur\n\n        if (\n          domUtils.matchesSelector(element, selector) &&\n          domUtils.nodeContains(context, eventTarget) &&\n          domUtils.nodeContains(context, element)\n        ) {\n          const { listeners } = cur\n\n          fakeEvent.currentTarget = element\n\n          for (const entry of listeners) {\n            if (optionsMatch(entry.options, options)) {\n              entry.func(fakeEvent)\n            }\n          }\n        }\n      }\n\n      element = domUtils.parentNode(element)\n    }\n  }\n\n  function delegateUseCapture(this: Element, event: Event | FakeEvent) {\n    return delegateListener.call(this, event, true)\n  }\n\n  // for type inferrence\n  return eventsMethods\n}\n\nclass FakeEvent implements Partial<Event> {\n  currentTarget: Node\n  originalEvent: Event\n  type: string\n\n  constructor(originalEvent: Event) {\n    this.originalEvent = originalEvent\n    // duplicate the event so that currentTarget can be changed\n    pExtend(this, originalEvent)\n  }\n\n  preventOriginalDefault() {\n    this.originalEvent.preventDefault()\n  }\n\n  stopPropagation() {\n    this.originalEvent.stopPropagation()\n  }\n\n  stopImmediatePropagation() {\n    this.originalEvent.stopImmediatePropagation()\n  }\n}\n\nfunction getOptions(param: { [index: string]: any } | boolean): { capture: boolean; passive: boolean } {\n  if (!is.object(param)) {\n    return { capture: !!param, passive: false }\n  }\n\n  return {\n    capture: !!param.capture,\n    passive: !!param.passive,\n  }\n}\n\nfunction optionsMatch(a: Partial<EventOptions> | boolean, b: Partial<EventOptions>) {\n  if (a === b) return true\n\n  if (typeof a === 'boolean') return !!b.capture === a && !!b.passive === false\n\n  return !!a.capture === !!b.capture && !!a.passive === !!b.passive\n}\n\nexport default {\n  id: 'events',\n  install,\n}\n"
	],
	"mappings": "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"
}