{
	"version": 3,
	"names": [
		"arr",
		"_interopRequireWildcard",
		"require",
		"domUtils",
		"_extendProd",
		"_interopRequireDefault",
		"_isProd",
		"obj",
		"__esModule",
		"default",
		"_getRequireWildcardCache",
		"e",
		"WeakMap",
		"r",
		"t",
		"has",
		"get",
		"n",
		"__proto__",
		"a",
		"Object",
		"defineProperty",
		"getOwnPropertyDescriptor",
		"u",
		"prototype",
		"hasOwnProperty",
		"call",
		"i",
		"set",
		"exports",
		"InteractableSet",
		"list",
		"selectorMap",
		"scope",
		"constructor",
		"this",
		"addListeners",
		"interactable:unset",
		"interactable",
		"target",
		"interactablesOnTarget",
		"is",
		"string",
		"id",
		"targetIndex",
		"findIndex",
		"splice",
		"new",
		"options",
		"extend",
		"actions",
		"Interactable",
		"document",
		"events",
		"addDocument",
		"_doc",
		"push",
		"value",
		"configurable",
		"fire",
		"win",
		"_win",
		"getExisting",
		"context",
		"isSelector",
		"find",
		"_context",
		"inContext",
		"forEachMatch",
		"node",
		"callback",
		"ret",
		"element",
		"matchesSelector",
		"undefined"
	],
	"sources": [
		"InteractableSet.ts"
	],
	"sourcesContent": [
		"import * as arr from '@interactjs/utils/arr'\nimport * as domUtils from '@interactjs/utils/domUtils'\nimport extend from '@interactjs/utils/extend'\nimport is from '@interactjs/utils/is'\n\nimport type { Interactable } from '@interactjs/core/Interactable'\nimport type { OptionsArg, Options } from '@interactjs/core/options'\nimport type { Scope } from '@interactjs/core/scope'\nimport type { Target } from '@interactjs/core/types'\n\ndeclare module '@interactjs/core/scope' {\n  interface SignalArgs {\n    'interactable:new': {\n      interactable: Interactable\n      target: Target\n      options: OptionsArg\n      win: Window\n    }\n  }\n}\n\nexport class InteractableSet {\n  // all set interactables\n  list: Interactable[] = []\n\n  selectorMap: {\n    [selector: string]: Interactable[]\n  } = {}\n\n  scope: Scope\n\n  constructor(scope: Scope) {\n    this.scope = scope\n    scope.addListeners({\n      'interactable:unset': ({ interactable }) => {\n        const { target } = interactable\n        const interactablesOnTarget: Interactable[] = is.string(target)\n          ? this.selectorMap[target]\n          : (target as any)[this.scope.id]\n\n        const targetIndex = arr.findIndex(interactablesOnTarget, (i) => i === interactable)\n        interactablesOnTarget.splice(targetIndex, 1)\n      },\n    })\n  }\n\n  new(target: Target, options?: any): Interactable {\n    options = extend(options || {}, {\n      actions: this.scope.actions,\n    })\n    const interactable = new this.scope.Interactable(target, options, this.scope.document, this.scope.events)\n\n    this.scope.addDocument(interactable._doc)\n    this.list.push(interactable)\n\n    if (is.string(target)) {\n      if (!this.selectorMap[target]) {\n        this.selectorMap[target] = []\n      }\n      this.selectorMap[target].push(interactable)\n    } else {\n      if (!(interactable.target as any)[this.scope.id]) {\n        Object.defineProperty(target, this.scope.id, {\n          value: [],\n          configurable: true,\n        })\n      }\n\n      ;(target as any)[this.scope.id].push(interactable)\n    }\n\n    this.scope.fire('interactable:new', {\n      target,\n      options,\n      interactable,\n      win: this.scope._win,\n    })\n\n    return interactable\n  }\n\n  getExisting(target: Target, options?: Options) {\n    const context = (options && options.context) || this.scope.document\n    const isSelector = is.string(target)\n    const interactablesOnTarget: Interactable[] = isSelector\n      ? this.selectorMap[target as string]\n      : (target as any)[this.scope.id]\n\n    if (!interactablesOnTarget) return undefined\n\n    return arr.find(\n      interactablesOnTarget,\n      (interactable) =>\n        interactable._context === context && (isSelector || interactable.inContext(target as any)),\n    )\n  }\n\n  forEachMatch<T>(node: Node, callback: (interactable: Interactable) => T): T | void {\n    for (const interactable of this.list) {\n      let ret: T\n\n      if (\n        (is.string(interactable.target)\n          ? // target is a selector and the element matches\n            is.element(node) && domUtils.matchesSelector(node, interactable.target)\n          : // target is the element\n            node === interactable.target) &&\n        // the element is in context\n        interactable.inContext(node)\n      ) {\n        ret = callback(interactable)\n      }\n\n      if (ret !== undefined) {\n        return ret\n      }\n    }\n  }\n}\n"
	],
	"mappings": "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"
}