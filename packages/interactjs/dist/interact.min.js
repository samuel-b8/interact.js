/* interact.js 1.10.24 | https://raw.github.com/taye/interact.js/main/LICENSE */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).interact=e()}(this,(function(){"use strict";var t=t=>!(!t||!t.Window)&&t instanceof t.Window;let e,n;function o(t){e=t;const o=t.document.createTextNode("");o.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(o)===o&&(t=t.wrap(t)),n=t}function i(e){if(t(e))return e;return(e.ownerDocument||e).defaultView||n.window}"undefined"!=typeof window&&window&&o(window);const r=t=>!!t&&"object"==typeof t,s=t=>"function"==typeof t;var a={window:e=>e===n||t(e),docFrag:t=>r(t)&&11===t.nodeType,object:r,func:s,number:t=>"number"==typeof t,bool:t=>"boolean"==typeof t,string:t=>"string"==typeof t,element:t=>{if(!t||"object"!=typeof t)return!1;const e=i(t)||n;return/object|function/.test(typeof Element)?t instanceof Element||t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName},plainObject:t=>r(t)&&!!t.constructor&&/function Object\b/.test(t.constructor.toString()),array:t=>r(t)&&void 0!==t.length&&s(t.splice)};function c({interaction:t}){if("drag"!==t.prepared.name)return;const e=t.prepared.axis;"x"===e?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):"y"===e&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}function l({iEvent:t,interaction:e}){if("drag"!==e.prepared.name)return;const n=e.prepared.axis;if("x"===n||"y"===n){const o="x"===n?"y":"x";t.page[o]=e.coords.start.page[o],t.client[o]=e.coords.start.client[o],t.delta[o]=0}}const p={id:"actions/drag",install:function(t){const{actions:e,Interactable:n,defaults:o}=t;n.prototype.draggable=p.draggable,e.map.drag=p,e.methodDict.drag="draggable",o.actions.drag=p.defaults},listeners:{"interactions:before-action-move":c,"interactions:action-resume":c,"interactions:action-move":l,"auto-start:check":t=>{const{interaction:e,interactable:n,buttons:o}=t,i=n.options.drag;if(i&&i.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(o&n.options.drag.mouseButtons)))return t.action={name:"drag",axis:"start"===i.lockAxis?i.startAxis:i.lockAxis},!1}},draggable:function(t){return a.object(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^(xy|x|y|start)$/.test(t.lockAxis)&&(this.options.drag.lockAxis=t.lockAxis),/^(xy|x|y)$/.test(t.startAxis)&&(this.options.drag.startAxis=t.startAxis),this):a.bool(t)?(this.options.drag.enabled=t,this):this.options.drag},beforeMove:c,move:l,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:()=>"move",filterEventType:t=>0===t.search("drag")};var u=p;const d={init:function(t){const e=t;d.document=e.document,d.DocumentFragment=e.DocumentFragment||h,d.SVGElement=e.SVGElement||h,d.SVGSVGElement=e.SVGSVGElement||h,d.SVGElementInstance=e.SVGElementInstance||h,d.Element=e.Element||h,d.HTMLElement=e.HTMLElement||d.Element,d.Event=e.Event,d.Touch=e.Touch||h,d.PointerEvent=e.PointerEvent||e.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function h(){}var f=d;const g={init:function(t){const e=f.Element,n=t.navigator||{};g.supportsTouch="ontouchstart"in t||a.func(t.DocumentTouch)&&f.document instanceof t.DocumentTouch,g.supportsPointerEvent=!1!==n.pointerEnabled&&!!f.PointerEvent,g.isIOS=/iP(hone|od|ad)/.test(n.platform),g.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),g.isIe9=/MSIE 9/.test(n.userAgent),g.isOperaMobile="Opera"===n.appName&&g.supportsTouch&&/Presto/.test(n.userAgent),g.prefixedMatchesSelector="matches"in e.prototype?"matches":"webkitMatchesSelector"in e.prototype?"webkitMatchesSelector":"mozMatchesSelector"in e.prototype?"mozMatchesSelector":"oMatchesSelector"in e.prototype?"oMatchesSelector":"msMatchesSelector",g.pEventTypes=g.supportsPointerEvent?f.PointerEvent===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,g.wheelEvent=f.document&&"onmousewheel"in f.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null};var m=g;function v(t,e){if(t.contains)return t.contains(e);for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function y(t,e){for(;a.element(t);){if(x(t,e))return t;t=b(t)}return null}function b(t){let e=t.parentNode;if(a.docFrag(e)){for(;(e=e.host)&&a.docFrag(e););return e}return e}function x(t,o){return n!==e&&(o=o.replace(/\/deep\//g," ")),t[m.prefixedMatchesSelector](o)}const w=t=>t.parentNode||t.host;function E(t,e){const n=[];let o,i=t;for(;(o=w(i))&&i!==e&&o!==i.ownerDocument;)n.unshift(i),i=o;return n}function T(t,e){return(parseInt(i(t).getComputedStyle(t).zIndex,10)||0)>=(parseInt(i(e).getComputedStyle(e).zIndex,10)||0)}function S(t,e,n){for(;a.element(t);){if(x(t,e))return!0;if((t=b(t))===n)return x(t,e)}return!1}function _(t){return t.correspondingUseElement||t}function P(t){const e=t instanceof f.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}function M(t){const e=P(t);if(!m.isIOS7&&e){const r={x:(o=(o=i(t))||n).scrollX||o.document.documentElement.scrollLeft,y:o.scrollY||o.document.documentElement.scrollTop};e.left+=r.x,e.right+=r.x,e.top+=r.y,e.bottom+=r.y}var o;return e}function D(t){const e=[];for(;t;)e.push(t),t=b(t);return e}function I(t){return!!a.string(t)&&(f.document.querySelector(t),!0)}function O(t,e){for(const n in e)t[n]=e[n];return t}function z(t,e,n){return"parent"===t?b(n):"self"===t?e.getRect(n):y(n,t)}function A(t,e,n,o){let i=t;return a.string(i)?i=z(i,e,n):a.func(i)&&(i=i(...o)),a.element(i)&&(i=M(i)),i}function C(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}}function k(t){return!t||"x"in t&&"y"in t||((t=O({},t)).x=t.left||0,t.y=t.top||0,t.width=t.width||(t.right||0)-t.x,t.height=t.height||(t.bottom||0)-t.y),t}function R(t,e,n){t.left&&(e.left+=n.x),t.right&&(e.right+=n.x),t.top&&(e.top+=n.y),t.bottom&&(e.bottom+=n.y),e.width=e.right-e.left,e.height=e.bottom-e.top}function F(t,e,n){const o=n&&t.options[n];return C(A(o&&o.origin||t.options.origin,t,e,[t&&e]))||{x:0,y:0}}function j(t,e,n=(t=>!0),o){if(o=o||{},a.string(t)&&-1!==t.search(" ")&&(t=X(t)),a.array(t))return t.forEach((t=>j(t,e,n,o))),o;if(a.object(t)&&(e=t,t=""),a.func(e)&&n(t))o[t]=o[t]||[],o[t].push(e);else if(a.array(e))for(var i=0;i<e.length;i++){var r;r=e[i];j(t,r,n,o)}else if(a.object(e))for(const i in e){j(X(i).map((e=>`${t}${e}`)),e[i],n,o)}return o}function X(t){return t.trim().split(/ +/)}var Y=(t,e)=>Math.sqrt(t*t+e*e);const L=["webkit","moz"];function q(t,e){t.__set||(t.__set={});for(const n in e)L.some((t=>0===n.indexOf(t)))||"function"!=typeof t[n]&&"__set"!==n&&Object.defineProperty(t,n,{get:()=>n in t.__set?t.__set[n]:t.__set[n]=e[n],set(e){t.__set[n]=e},configurable:!0});return t}function V(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp}function W(t){t.page.x=0,t.page.y=0,t.client.x=0,t.client.y=0}function B(t){return t instanceof f.Event||t instanceof f.Touch}function G(t,e,n){return t=t||"page",(n=n||{}).x=e[t+"X"],n.y=e[t+"Y"],n}function N(t,e){return e=e||{x:0,y:0},m.isOperaMobile&&B(t)?(G("screen",t,e),e.x+=window.scrollX,e.y+=window.scrollY):G("page",t,e),e}function U(t){return a.number(t.pointerId)?t.pointerId:t.identifier}function H(t,e,n){const o=e.length>1?K(e):e[0];N(o,t.page),function(t,e){e=e||{},m.isOperaMobile&&B(t)?G("screen",t,e):G("client",t,e)}(o,t.client),t.timeStamp=n}function $(t){const e=[];return a.array(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function K(t){const e={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0};for(var n=0;n<t.length;n++){const o=t[n];for(const t in e)e[t]+=o[t]}for(const n in e)e[n]/=t.length;return e}function J(t){if(!t.length)return null;const e=$(t),n=Math.min(e[0].pageX,e[1].pageX),o=Math.min(e[0].pageY,e[1].pageY),i=Math.max(e[0].pageX,e[1].pageX),r=Math.max(e[0].pageY,e[1].pageY);return{x:n,y:o,left:n,top:o,right:i,bottom:r,width:i-n,height:r-o}}function Q(t,e){const n=e+"X",o=e+"Y",i=$(t),r=i[0][n]-i[1][n],s=i[0][o]-i[1][o];return Y(r,s)}function Z(t,e){const n=e+"X",o=e+"Y",i=$(t),r=i[1][n]-i[0][n],s=i[1][o]-i[0][o];return 180*Math.atan2(s,r)/Math.PI}function tt(t){return a.string(t.pointerType)?t.pointerType:a.number(t.pointerType)?[void 0,void 0,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type||"")||t instanceof f.Touch?"touch":"mouse"}function et(t){const e=a.func(t.composedPath)?t.composedPath():t.path;return[_(e?e[0]:t.target),_(t.currentTarget)]}function nt(t){return{coords:t,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault(){}}}class ot{immediatePropagationStopped=!1;propagationStopped=!1;constructor(t){this._interaction=t}preventDefault(){}stopPropagation(){this.propagationStopped=!0}stopImmediatePropagation(){this.immediatePropagationStopped=this.propagationStopped=!0}}Object.defineProperty(ot.prototype,"interaction",{get(){return this._interaction._proxy},set(){}});const it=(t,e)=>{for(var n=0;n<e.length;n++){const o=e[n];t.push(o)}return t},rt=t=>it([],t),st=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1},at=(t,e)=>t[st(t,e)];class ct extends ot{dropzone;dragEvent;relatedTarget;draggable;propagationStopped=!1;immediatePropagationStopped=!1;constructor(t,e,n){super(e._interaction);const{element:o,dropzone:i}="dragleave"===n?t.prev:t.cur;this.type=n,this.target=o,this.currentTarget=o,this.dropzone=i,this.dragEvent=e,this.relatedTarget=e.target,this.draggable=e.interactable,this.timeStamp=e.timeStamp}reject(){const{dropState:t}=this._interaction;if("dropactivate"===this.type||this.dropzone&&t.cur.dropzone===this.dropzone&&t.cur.element===this.target)if(t.prev.dropzone=this.dropzone,t.prev.element=this.target,t.rejected=!0,t.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){const e=t.activeDrops,n=st(e,(({dropzone:t,element:e})=>t===this.dropzone&&e===this.target));t.activeDrops.splice(n,1);const o=new ct(t,this.dragEvent,"dropdeactivate");o.dropzone=this.dropzone,o.target=this.target,this.dropzone.fire(o)}else this.dropzone.fire(new ct(t,this.dragEvent,"dragleave"))}preventDefault(){}stopPropagation(){this.propagationStopped=!0}stopImmediatePropagation(){this.immediatePropagationStopped=this.propagationStopped=!0}}function lt(t,e){for(var n=0;n<t.slice().length;n++){var o;o=t.slice()[n];const{dropzone:i,element:r}=o;e.dropzone=i,e.target=r,i.fire(e),e.propagationStopped=e.immediatePropagationStopped=!1}}function pt(t,e){const n=function({interactables:t},e){const n=[];for(var o=0;o<t.list.length;o++){const r=t.list[o];if(!r.options.drop.enabled)continue;const s=r.options.drop.accept;if(!(a.element(s)&&s!==e||a.string(s)&&!x(e,s)||a.func(s)&&!s({dropzone:r,draggableElement:e})))for(var i=0;i<r.getAllElements().length;i++){const t=r.getAllElements()[i];t!==e&&n.push({dropzone:r,element:t,rect:r.getRect(t)})}}return n}(t,e);for(var o=0;o<n.length;o++){const t=n[o];t.rect=t.dropzone.getRect(t.element)}return n}function ut({dropState:t,interactable:e,element:n},o,i){const r=[];for(var s=0;s<t.activeDrops.length;s++){var a;a=t.activeDrops[s];const{dropzone:c,element:l,rect:p}=a,u=c.dropCheck(o,i,e,n,l,p);r.push(u?l:null)}const c=function(t){let e,n=[];for(let o=0;o<t.length;o++){const i=t[o],r=t[e];if(!i||o===e)continue;if(!r){e=o;continue}const s=w(i),a=w(r);if(s===i.ownerDocument)continue;if(a===i.ownerDocument){e=o;continue}if(s===a){T(i,r)&&(e=o);continue}let c;if(n=n.length?n:E(r),r instanceof f.HTMLElement&&i instanceof f.SVGElement&&!(i instanceof f.SVGSVGElement)){if(i===a)continue;c=i.ownerSVGElement}else c=i;const l=E(c,r.ownerDocument);let p=0;for(;l[p]&&l[p]===n[p];)p++;const u=[l[p-1],l[p],n[p]];if(u[0]){let t=u[0].lastChild;for(;t;){if(t===u[1]){e=o,n=l;break}if(t===u[2])break;t=t.previousSibling}}}return e}(r);return t.activeDrops[c]||null}function dt(t,e,n){const o=t.dropState,i={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(i.activate=new ct(o,n,"dropactivate"),i.activate.target=null,i.activate.dropzone=null),"dragend"===n.type&&(i.deactivate=new ct(o,n,"dropdeactivate"),i.deactivate.target=null,i.deactivate.dropzone=null),o.rejected||(o.cur.element!==o.prev.element&&(o.prev.dropzone&&(i.leave=new ct(o,n,"dragleave"),n.dragLeave=i.leave.target=o.prev.element,n.prevDropzone=i.leave.dropzone=o.prev.dropzone),o.cur.dropzone&&(i.enter=new ct(o,n,"dragenter"),n.dragEnter=o.cur.element,n.dropzone=o.cur.dropzone)),"dragend"===n.type&&o.cur.dropzone&&(i.drop=new ct(o,n,"drop"),n.dropzone=o.cur.dropzone,n.relatedTarget=o.cur.element),"dragmove"===n.type&&o.cur.dropzone&&(i.move=new ct(o,n,"dropmove"),n.dropzone=o.cur.dropzone)),i}function ht(t,e){const n=t.dropState,{activeDrops:o,cur:i,prev:r}=n;e.leave&&r.dropzone.fire(e.leave),e.enter&&i.dropzone.fire(e.enter),e.move&&i.dropzone.fire(e.move),e.drop&&i.dropzone.fire(e.drop),e.deactivate&&lt(o,e.deactivate),n.prev.dropzone=i.dropzone,n.prev.element=i.element}function ft({interaction:t,iEvent:e,event:n},o){if("dragmove"!==e.type&&"dragend"!==e.type)return;const i=t.dropState;o.dynamicDrop&&(i.activeDrops=pt(o,t.element));const r=e,s=ut(t,r,n);i.rejected=i.rejected&&!!s&&s.dropzone===i.cur.dropzone&&s.element===i.cur.element,i.cur.dropzone=s&&s.dropzone,i.cur.element=s&&s.element,i.events=dt(t,0,r)}const gt={id:"actions/drop",install:function(t){const{actions:e,interactStatic:n,Interactable:o,defaults:i}=t;t.usePlugin(u),o.prototype.dropzone=function(t){return function(t,e){if(a.object(e)){if(t.options.drop.enabled=!1!==e.enabled,e.listeners){const n=j(e.listeners),o=Object.keys(n).reduce(((t,e)=>(t[/^(enter|leave)/.test(e)?"drag"+e:/^(activate|deactivate|move)/.test(e)?"drop"+e:e]=n[e],t)),{}),i=t.options.drop.listeners;i&&t.off(i),t.on(o),t.options.drop.listeners=o}return a.func(e.ondrop)&&t.on("drop",e.ondrop),a.func(e.ondropactivate)&&t.on("dropactivate",e.ondropactivate),a.func(e.ondropdeactivate)&&t.on("dropdeactivate",e.ondropdeactivate),a.func(e.ondragenter)&&t.on("dragenter",e.ondragenter),a.func(e.ondragleave)&&t.on("dragleave",e.ondragleave),a.func(e.ondropmove)&&t.on("dropmove",e.ondropmove),/^(pointer|center)$/.test(e.overlap)?t.options.drop.overlap=e.overlap:a.number(e.overlap)&&(t.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(t.options.drop.accept=e.accept),"checker"in e&&(t.options.drop.checker=e.checker),t}if(a.bool(e))return t.options.drop.enabled=e,t;return t.options.drop}(this,t)},o.prototype.dropCheck=function(t,e,n,o,i,r){return function(t,e,n,o,i,r,s){let c=!1;if(!(s=s||t.getRect(r)))return!!t.options.drop.checker&&t.options.drop.checker(e,n,c,t,r,o,i);const l=t.options.drop.overlap;if("pointer"===l){const t=F(o,i,"drag"),n=N(e);n.x+=t.x,n.y+=t.y;const r=n.x>s.left&&n.x<s.right,a=n.y>s.top&&n.y<s.bottom;c=r&&a}const p=o.getRect(i);if(p&&"center"===l){const t=p.left+p.width/2,e=p.top+p.height/2;c=t>=s.left&&t<=s.right&&e>=s.top&&e<=s.bottom}if(p&&a.number(l)){c=Math.max(0,Math.min(s.right,p.right)-Math.max(s.left,p.left))*Math.max(0,Math.min(s.bottom,p.bottom)-Math.max(s.top,p.top))/(p.width*p.height)>=l}t.options.drop.checker&&(c=t.options.drop.checker(e,n,c,t,r,o,i));return c}(this,t,e,n,o,i,r)},n.dynamicDrop=function(e){return a.bool(e)?(t.dynamicDrop=e,n):t.dynamicDrop},O(e.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),e.methodDict.drop="dropzone",t.dynamicDrop=!1,i.actions.drop=gt.defaults},listeners:{"interactions:before-action-start":({interaction:t})=>{"drag"===t.prepared.name&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":({interaction:t,event:e,iEvent:n},o)=>{if("drag"!==t.prepared.name)return;const i=t.dropState;i.activeDrops=[],i.events={},i.activeDrops=pt(o,t.element),i.events=dt(t,0,n),i.events.activate&&(lt(i.activeDrops,i.events.activate),o.fire("actions/drop:start",{interaction:t,dragEvent:n}))},"interactions:action-move":ft,"interactions:after-action-move":({interaction:t,iEvent:e},n)=>{if("drag"!==t.prepared.name)return;const o=t.dropState;ht(t,o.events),n.fire("actions/drop:move",{interaction:t,dragEvent:e}),o.events={}},"interactions:action-end":(t,e)=>{if("drag"!==t.interaction.prepared.name)return;const{interaction:n,iEvent:o}=t;ft(t,e),ht(n,n.dropState.events),e.fire("actions/drop:end",{interaction:n,dragEvent:o})},"interactions:stop":({interaction:t})=>{if("drag"!==t.prepared.name)return;const{dropState:e}=t;e&&(e.activeDrops=null,e.events=null,e.cur.dropzone=null,e.cur.element=null,e.prev.dropzone=null,e.prev.element=null,e.rejected=!1)}},getActiveDrops:pt,getDrop:ut,getDropEvents:dt,fireDropEvents:ht,filterEventType:t=>0===t.search("drag")||0===t.search("drop"),defaults:{enabled:!1,accept:null,overlap:"pointer"}};var mt=gt;function vt({interaction:t,iEvent:e,phase:n}){if("gesture"!==t.prepared.name)return;const o=t.pointers.map((t=>t.pointer)),i="start"===n,r="end"===n,s=t.interactable.options.deltaSource;if(e.touches=[o[0],o[1]],i)e.distance=Q(o,s),e.box=J(o),e.scale=1,e.ds=0,e.angle=Z(o,s),e.da=0,t.gesture.startDistance=e.distance,t.gesture.startAngle=e.angle;else if(r||t.pointers.length<2){const n=t.prevEvent;e.distance=n.distance,e.box=n.box,e.scale=n.scale,e.ds=0,e.angle=n.angle,e.da=0}else e.distance=Q(o,s),e.box=J(o),e.scale=e.distance/t.gesture.startDistance,e.angle=Z(o,s),e.ds=e.scale-t.gesture.scale,e.da=e.angle-t.gesture.angle;t.gesture.distance=e.distance,t.gesture.angle=e.angle,a.number(e.scale)&&e.scale!==1/0&&!isNaN(e.scale)&&(t.gesture.scale=e.scale)}const yt={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(t){const{actions:e,Interactable:n,defaults:o}=t;n.prototype.gesturable=function(t){return a.object(t)?(this.options.gesture.enabled=!1!==t.enabled,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):a.bool(t)?(this.options.gesture.enabled=t,this):this.options.gesture},e.map.gesture=yt,e.methodDict.gesture="gesturable",o.actions.gesture=yt.defaults},listeners:{"interactions:action-start":vt,"interactions:action-move":vt,"interactions:action-end":vt,"interactions:new":({interaction:t})=>{t.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":t=>{if(t.interaction.pointers.length<2)return;const e=t.interactable.options.gesture;return e&&e.enabled?(t.action={name:"gesture"},!1):void 0}},defaults:{},getCursor:()=>"",filterEventType:t=>0===t.search("gesture")};var bt=yt;function xt(t,e,n,o,i,r,s){if(!e)return!1;if(!0===e){const e=a.number(r.width)?r.width:r.right-r.left,o=a.number(r.height)?r.height:r.bottom-r.top;if(s=Math.min(s,Math.abs(("left"===t||"right"===t?e:o)/2)),e<0&&("left"===t?t="right":"right"===t&&(t="left")),o<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t){const t=e>=0?r.left:r.right;return n.x<t+s}if("top"===t){const t=o>=0?r.top:r.bottom;return n.y<t+s}if("right"===t)return n.x>(e>=0?r.right:r.left)-s;if("bottom"===t)return n.y>(o>=0?r.bottom:r.top)-s}return!!a.element(o)&&(a.element(e)?e===o:S(o,e,i))}function wt({iEvent:t,interaction:e}){if("resize"!==e.prepared.name||!e.resizeAxes)return;const n=t;e.interactable.options.resize.square?("y"===e.resizeAxes?n.delta.x=n.delta.y:n.delta.y=n.delta.x,n.axes="xy"):(n.axes=e.resizeAxes,"x"===e.resizeAxes?n.delta.y=0:"y"===e.resizeAxes&&(n.delta.x=0))}const Et={id:"actions/resize",before:["actions/drag"],install:function(t){const{actions:e,browser:n,Interactable:o,defaults:i}=t;Et.cursors=function(t){return t.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),Et.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,o.prototype.resizable=function(e){return function(t,e,n){if(a.object(e))return t.options.resize.enabled=!1!==e.enabled,t.setPerAction("resize",e),t.setOnEvents("resize",e),a.string(e.axis)&&/^x$|^y$|^xy$/.test(e.axis)?t.options.resize.axis=e.axis:null===e.axis&&(t.options.resize.axis=n.defaults.actions.resize.axis),a.bool(e.preserveAspectRatio)?t.options.resize.preserveAspectRatio=e.preserveAspectRatio:a.bool(e.square)&&(t.options.resize.square=e.square),t;if(a.bool(e))return t.options.resize.enabled=e,t;return t.options.resize}(this,e,t)},e.map.resize=Et,e.methodDict.resize="resizable",i.actions.resize=Et.defaults},listeners:{"interactions:new":({interaction:t})=>{t.resizeAxes="xy"},"interactions:action-start":t=>{!function({iEvent:t,interaction:e}){if("resize"!==e.prepared.name||!e.prepared.edges)return;const n=t,o=e.rect;e._rects={start:O({},o),corrected:O({},o),previous:O({},o),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},n.edges=e.prepared.edges,n.rect=e._rects.corrected,n.deltaRect=e._rects.delta}(t),wt(t)},"interactions:action-move":t=>{!function({iEvent:t,interaction:e}){if("resize"!==e.prepared.name||!e.prepared.edges)return;const n=t,o=e.interactable.options.resize.invert,i="reposition"===o||"negate"===o,r=e.rect,{start:s,corrected:a,delta:c,previous:l}=e._rects;if(O(l,a),i){if(O(a,r),"reposition"===o){if(a.top>a.bottom){const t=a.top;a.top=a.bottom,a.bottom=t}if(a.left>a.right){const t=a.left;a.left=a.right,a.right=t}}}else a.top=Math.min(r.top,s.bottom),a.bottom=Math.max(r.bottom,s.top),a.left=Math.min(r.left,s.right),a.right=Math.max(r.right,s.left);a.width=a.right-a.left,a.height=a.bottom-a.top;for(const t in a)c[t]=a[t]-l[t];n.edges=e.prepared.edges,n.rect=a,n.deltaRect=c}(t),wt(t)},"interactions:action-end":function({iEvent:t,interaction:e}){if("resize"!==e.prepared.name||!e.prepared.edges)return;const n=t;n.edges=e.prepared.edges,n.rect=e._rects.corrected,n.deltaRect=e._rects.delta},"auto-start:check":function(t){const{interaction:e,interactable:n,element:o,rect:i,buttons:r}=t;if(!i)return;const s=O({},e.coords.cur.page),c=n.options.resize;if(c&&c.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(r&c.mouseButtons))){if(a.object(c.edges)){const n={left:!1,right:!1,top:!1,bottom:!1};for(const t in n)n[t]=xt(t,c.edges[t],s,e._latestPointer.eventTarget,o,i,c.margin||Et.defaultMargin);n.left=n.left&&!n.right,n.top=n.top&&!n.bottom,(n.left||n.right||n.top||n.bottom)&&(t.action={name:"resize",edges:n})}else{const e="y"!==c.axis&&s.x>i.right-Et.defaultMargin,n="x"!==c.axis&&s.y>i.bottom-Et.defaultMargin;(e||n)&&(t.action={name:"resize",axes:(e?"x":"")+(n?"y":"")})}return!t.action&&void 0}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor({edges:t,axis:e,name:n}){const o=Et.cursors;let i=null;if(e)i=o[n+e];else if(t){let e="";for(var r=["top","bottom","left","right"],s=0;s<r.length;s++){const n=r[s];t[n]&&(e+=n)}i=o[e]}return i},filterEventType:t=>0===t.search("resize"),defaultMargin:null};var Tt=Et,St={id:"actions",install(t){t.usePlugin(bt),t.usePlugin(Tt),t.usePlugin(u),t.usePlugin(mt)}};let _t,Pt,Mt=0;var Dt={request:t=>_t(t),cancel:t=>Pt(t),init:function(t){if(_t=t.requestAnimationFrame,Pt=t.cancelAnimationFrame,!_t){const n=["ms","moz","webkit","o"];for(var e=0;e<n.length;e++){const o=n[e];_t=t[o+"RequestAnimationFrame"],Pt=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}}_t=_t&&_t.bind(t),Pt=Pt&&Pt.bind(t),_t||(_t=e=>{const n=Date.now(),o=Math.max(0,16-(n-Mt)),i=t.setTimeout((()=>{e(n+o)}),o);return Mt=n+o,i},Pt=t=>clearTimeout(t))}};const It={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start(t){It.isScrolling=!0,Dt.cancel(It.i),t.autoScroll=It,It.interaction=t,It.prevTime=It.now(),It.i=Dt.request(It.scroll)},stop(){It.isScrolling=!1,It.interaction&&(It.interaction.autoScroll=null),Dt.cancel(It.i)},scroll(){const{interaction:t}=It,{interactable:e,element:n}=t,o=t.prepared.name,i=e.options[o].autoScroll,r=Ot(i.container,e,n),s=It.now(),c=(s-It.prevTime)/1e3,l=i.speed*c;if(l>=1){const o={x:It.x*l,y:It.y*l};if(o.x||o.y){const i=zt(r);a.window(r)?r.scrollBy(o.x,o.y):r&&(r.scrollLeft+=o.x,r.scrollTop+=o.y);const s=zt(r),c={x:s.x-i.x,y:s.y-i.y};(c.x||c.y)&&e.fire({type:"autoscroll",target:n,interactable:e,delta:c,interaction:t,container:r})}It.prevTime=s}It.isScrolling&&(Dt.cancel(It.i),It.i=Dt.request(It.scroll))},check(t,e){var n;return null==(n=t.options[e].autoScroll)?void 0:n.enabled},onInteractionMove({interaction:t,pointer:e}){if(!t.interacting()||!It.check(t.interactable,t.prepared.name))return;if(t.simulation)return void(It.x=It.y=0);let n,o,i,r;const{interactable:s,element:c}=t,l=t.prepared.name,p=s.options[l].autoScroll,u=Ot(p.container,s,c);if(a.window(u))r=e.clientX<It.margin,n=e.clientY<It.margin,o=e.clientX>u.innerWidth-It.margin,i=e.clientY>u.innerHeight-It.margin;else{const t=P(u);r=e.clientX<t.left+It.margin,n=e.clientY<t.top+It.margin,o=e.clientX>t.right-It.margin,i=e.clientY>t.bottom-It.margin}It.x=o?1:r?-1:0,It.y=i?1:n?-1:0,It.isScrolling||(It.margin=p.margin,It.speed=p.speed,It.start(t))}};function Ot(t,e,n){return(a.string(t)?z(t,e,n):t)||i(n)}function zt(t){return a.window(t)&&(t=window.document.body),{x:t.scrollLeft,y:t.scrollTop}}const At={id:"auto-scroll",install:function(t){const{defaults:e,actions:n}=t;t.autoScroll=It,It.now=()=>t.now(),n.phaselessTypes.autoscroll=!0,e.perAction.autoScroll=It.defaults},listeners:{"interactions:new":({interaction:t})=>{t.autoScroll=null},"interactions:destroy":({interaction:t})=>{t.autoScroll=null,It.stop(),It.interaction&&(It.interaction=null)},"interactions:stop":It.stop,"interactions:action-move":t=>It.onInteractionMove(t)}};var Ct=At;function kt(t,e){let o=!1;return function(){return o||(n.console.warn(e),o=!0),t.apply(this,arguments)}}function Rt(t,e){return t.name=e.name,t.axis=e.axis,t.edges=e.edges,t}function Ft(t){return a.bool(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor}function jt(t){return a.func(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker}var Xt={id:"auto-start/interactableMethods",install:function(t){const{Interactable:e}=t;e.prototype.getAction=function(e,n,o,i){const r=function(t,e,n,o,i){const r=t.getRect(o),s=e.buttons||{0:1,1:4,3:8,4:16}[e.button],a={action:null,interactable:t,interaction:n,element:o,rect:r,buttons:s};return i.fire("auto-start:check",a),a.action}(this,n,o,i,t);return this.options.actionChecker?this.options.actionChecker(e,n,r,this,i,o):r},e.prototype.ignoreFrom=kt((function(t){return this._backCompatOption("ignoreFrom",t)}),"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),e.prototype.allowFrom=kt((function(t){return this._backCompatOption("allowFrom",t)}),"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),e.prototype.actionChecker=jt,e.prototype.styleCursor=Ft}};function Yt(t,e,n,o,i){return e.testIgnoreAllow(e.options[t.name],n,o)&&e.options[t.name].enabled&&Wt(e,n,t,i)?t:null}function Lt(t,e,n,o,i,r,s){for(let a=0,c=o.length;a<c;a++){const c=o[a],l=i[a],p=c.getAction(e,n,t,l);if(!p)continue;const u=Yt(p,c,l,r,s);if(u)return{action:u,interactable:c,element:l}}return{action:null,interactable:null,element:null}}function qt(t,e,n,o,i){let r=[],s=[],c=o;function l(t){r.push(t),s.push(c)}for(;a.element(c);){r=[],s=[],i.interactables.forEachMatch(c,l);const a=Lt(t,e,n,r,s,o,i);if(a.action&&!a.interactable.options[a.action.name].manualStart)return a;c=b(c)}return{action:null,interactable:null,element:null}}function Vt(t,{action:e,interactable:n,element:o},i){e=e||{name:null},t.interactable=n,t.element=o,Rt(t.prepared,e),t.rect=n&&e.name?n.getRect(o):null,Nt(t,i),i.fire("autoStart:prepared",{interaction:t})}function Wt(t,e,n,o){const i=t.options,r=i[n.name].max,s=i[n.name].maxPerElement,a=o.autoStart.maxInteractions;let c=0,l=0,p=0;if(!(r&&s&&a))return!1;for(var u=0;u<o.interactions.list.length;u++){const i=o.interactions.list[u],d=i.prepared.name;if(i.interacting()){if(c++,c>=a)return!1;if(i.interactable===t){if(l+=d===n.name?1:0,l>=r)return!1;if(i.element===e&&(p++,d===n.name&&p>=s))return!1}}}return a>0}function Bt(t,e){return a.number(t)?(e.autoStart.maxInteractions=t,this):e.autoStart.maxInteractions}function Gt(t,e,n){const{cursorElement:o}=n.autoStart;o&&o!==t&&(o.style.cursor=""),t.ownerDocument.documentElement.style.cursor=e,t.style.cursor=e,n.autoStart.cursorElement=e?t:null}function Nt(t,e){const{interactable:n,element:o,prepared:i}=t;if("mouse"!==t.pointerType||!n||!n.options.styleCursor)return void(e.autoStart.cursorElement&&Gt(e.autoStart.cursorElement,"",e));let r="";if(i.name){const s=n.options[i.name].cursorChecker;r=a.func(s)?s(i,n,o,t._interacting):e.actions.map[i.name].getCursor(i)}Gt(t.element,r||"",e)}const Ut={id:"auto-start/base",before:["actions"],install:function(t){const{interactStatic:e,defaults:n}=t;t.usePlugin(Xt),n.base.actionChecker=null,n.base.styleCursor=!0,O(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),e.maxInteractions=e=>Bt(e,t),t.autoStart={maxInteractions:1/0,withinInteractionLimit:Wt,cursorElement:null}},listeners:{"interactions:down":function({interaction:t,pointer:e,event:n,eventTarget:o},i){if(t.interacting())return;Vt(t,qt(t,e,n,o,i),i)},"interactions:move":(t,e)=>{!function({interaction:t,pointer:e,event:n,eventTarget:o},i){if("mouse"!==t.pointerType||t.pointerIsDown||t.interacting())return;Vt(t,qt(t,e,n,o,i),i)}(t,e),function(t,e){const{interaction:n}=t;if(!n.pointerIsDown||n.interacting()||!n.pointerWasMoved||!n.prepared.name)return;e.fire("autoStart:before-start",t);const{interactable:o}=n,i=n.prepared.name;i&&o&&(o.options[i].manualStart||!Wt(o,n.element,n.prepared,e)?n.stop():(n.start(n.prepared,o,n.element),Nt(n,e)))}(t,e)},"interactions:stop":function({interaction:t},e){const{interactable:n}=t;n&&n.options.styleCursor&&Gt(t.element,"",e)}},maxInteractions:Bt,withinInteractionLimit:Wt,validateAction:Yt};var Ht=Ut;var $t={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function({interaction:t,eventTarget:e,dx:n,dy:o},i){if("drag"!==t.prepared.name)return;const r=Math.abs(n),s=Math.abs(o),c=t.interactable.options.drag,l=c.startAxis,p=r>s?"x":r<s?"y":"xy";if(t.prepared.axis="start"===c.lockAxis?p[0]:c.lockAxis,"xy"!==p&&"xy"!==l&&l!==p){t.prepared.name=null;let n=e;const o=function(o){if(o===t.interactable)return;const r=t.interactable.options.drag;if(!r.manualStart&&o.testIgnoreAllow(r,n,e)){const r=o.getAction(t.downPointer,t.downEvent,t,n);if(r&&"drag"===r.name&&function(t,e){if(!e)return!1;const n=e.options.drag.startAxis;return"xy"===t||"xy"===n||n===t}(p,o)&&Ht.validateAction(r,o,n,e,i))return o}};for(;a.element(n);){const e=i.interactables.forEachMatch(n,o);if(e){t.prepared.name="drag",t.interactable=e,t.element=n;break}n=b(n)}}}}};function Kt(t){const e=t.prepared&&t.prepared.name;if(!e)return null;const n=t.interactable.options;return n[e].hold||n[e].delay}const Jt={id:"auto-start/hold",install:function(t){const{defaults:e}=t;t.usePlugin(Ht),e.perAction.hold=0,e.perAction.delay=0},listeners:{"interactions:new":({interaction:t})=>{t.autoStartHoldTimer=null},"autoStart:prepared":({interaction:t})=>{const e=Kt(t);e>0&&(t.autoStartHoldTimer=setTimeout((()=>{t.start(t.prepared,t.interactable,t.element)}),e))},"interactions:move":({interaction:t,duplicate:e})=>{t.autoStartHoldTimer&&t.pointerWasMoved&&!e&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":({interaction:t})=>{Kt(t)>0&&(t.prepared.name=null)}},getHoldDuration:Kt};var Qt=Jt,Zt={id:"auto-start",install(t){t.usePlugin(Ht),t.usePlugin(Qt),t.usePlugin($t)}};const te=function(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):a.bool(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault};function ee({interaction:t,event:e}){t.interactable&&t.interactable.checkAndPreventDefault(e)}var ne={id:"core/interactablePreventDefault",install:function(t){const{Interactable:e}=t;e.prototype.preventDefault=te,e.prototype.checkAndPreventDefault=function(e){return function(t,e,n){const o=t.options.preventDefault;if("never"!==o)if("always"!==o){if(e.events.supportsPassive&&/^touch(start|move)$/.test(n.type)){const t=i(n.target).document,o=e.getDocOptions(t);if(!o||!o.events||!1!==o.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||a.element(n.target)&&x(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,t,e)},t.interactions.docEvents.push({type:"dragstart",listener(e){for(var n=0;n<t.interactions.list.length;n++){const o=t.interactions.list[n];if(o.element&&(o.element===e.target||v(o.element,e.target)))return void o.interactable.checkAndPreventDefault(e)}}})},listeners:["down","move","up","cancel"].reduce(((t,e)=>(t["interactions:"+e]=ee,t)),{})};function oe(t,e){if(e.phaselessTypes[t])return!0;for(const n in e.map)if(0===t.indexOf(n)&&t.substr(n.length)in e.phases)return!0;return!1}function ie(t){const e={};for(const n in t){const o=t[n];a.plainObject(o)?e[n]=ie(o):a.array(o)?e[n]=rt(o):e[n]=o}return e}class re{states=[];startOffset={left:0,right:0,top:0,bottom:0};startDelta;result;endResult;startEdges;edges;interaction;constructor(t){this.interaction=t,this.result=se(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}start({phase:t},e){const{interaction:n}=this,o=function(t){const e=t.interactable.options[t.prepared.name],n=e.modifiers;if(n&&n.length)return n;return["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map((t=>{const n=e[t];return n&&n.enabled&&{options:n,methods:n._methods}})).filter((t=>!!t))}(n);var i,r;this.prepareStates(o),this.startEdges=O({},n.edges),this.edges=O({},this.startEdges),this.startOffset=(i=n.rect,r=e,i?{left:r.x-i.left,top:r.y-i.top,right:i.right-r.x,bottom:i.bottom-r.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};const s=this.fillArg({phase:t,pageCoords:e,preEnd:!1});this.result=se(),this.startAll(s);return this.result=this.setAll(s)}fillArg(t){const{interaction:e}=this;return t.interaction=e,t.interactable=e.interactable,t.element=e.element,t.rect||(t.rect=e.rect),t.edges||(t.edges=this.startEdges),t.startOffset=this.startOffset,t}startAll(t){for(var e=0;e<this.states.length;e++){const n=this.states[e];n.methods.start&&(t.state=n,n.methods.start(t))}}setAll(t){const{phase:e,preEnd:n,skipModifiers:o,rect:i,edges:r}=t;t.coords=O({},t.pageCoords),t.rect=O({},i),t.edges=O({},r);const s=o?this.states.slice(o):this.states,a=se(t.coords,t.rect);for(var c=0;c<s.length;c++){var l;const o=s[c],{options:i}=o,r=O({},t.coords);let p=null;null!=(l=o.methods)&&l.set&&this.shouldDo(i,n,e)&&(t.state=o,p=o.methods.set(t),R(t.edges,t.rect,{x:t.coords.x-r.x,y:t.coords.y-r.y})),a.eventProps.push(p)}O(this.edges,t.edges),a.delta.x=t.coords.x-t.pageCoords.x,a.delta.y=t.coords.y-t.pageCoords.y,a.rectDelta.left=t.rect.left-i.left,a.rectDelta.right=t.rect.right-i.right,a.rectDelta.top=t.rect.top-i.top,a.rectDelta.bottom=t.rect.bottom-i.bottom;const p=this.result.coords,u=this.result.rect;if(p&&u){const t=a.rect.left!==u.left||a.rect.right!==u.right||a.rect.top!==u.top||a.rect.bottom!==u.bottom;a.changed=t||p.x!==a.coords.x||p.y!==a.coords.y}return a}applyToInteraction(t){const{interaction:e}=this,{phase:n}=t,o=e.coords.cur,i=e.coords.start,{result:r,startDelta:s}=this,a=r.delta;"start"===n&&O(this.startDelta,r.delta);for(var c=0;c<2;c++){var l;l=[[i,s],[o,a]][c];const[t,e]=l;t.page.x+=e.x,t.page.y+=e.y,t.client.x+=e.x,t.client.y+=e.y}const{rectDelta:p}=this.result,u=t.rect||e.rect;u.left+=p.left,u.right+=p.right,u.top+=p.top,u.bottom+=p.bottom,u.width=u.right-u.left,u.height=u.bottom-u.top}setAndApply(t){const{interaction:e}=this,{phase:n,preEnd:o,skipModifiers:i}=t,r=this.setAll(this.fillArg({preEnd:o,phase:n,pageCoords:t.modifiedCoords||e.coords.cur.page}));if(this.result=r,!r.changed&&(!i||i<this.states.length)&&e.interacting())return!1;if(t.modifiedCoords){const{page:n}=e.coords.cur,o={x:t.modifiedCoords.x-n.x,y:t.modifiedCoords.y-n.y};r.coords.x+=o.x,r.coords.y+=o.y,r.delta.x+=o.x,r.delta.y+=o.y}this.applyToInteraction(t)}beforeEnd(t){const{interaction:e,event:n}=t,o=this.states;if(!o||!o.length)return;let i=!1;for(var r=0;r<o.length;r++){const e=o[r];t.state=e;const{options:n,methods:s}=e,a=s.beforeEnd&&s.beforeEnd(t);if(a)return this.endResult=a,!1;i=i||!i&&this.shouldDo(n,!0,t.phase,!0)}i&&e.move({event:n,preEnd:!0})}stop(t){const{interaction:e}=t;if(!this.states||!this.states.length)return;const n=O({states:this.states,interactable:e.interactable,element:e.element,rect:null},t);this.fillArg(n);for(var o=0;o<this.states.length;o++){const t=this.states[o];n.state=t,t.methods.stop&&t.methods.stop(n)}this.states=null,this.endResult=null}prepareStates(t){this.states=[];for(let e=0;e<t.length;e++){const{options:n,methods:o,name:i}=t[e];this.states.push({options:n,methods:o,index:e,name:i})}return this.states}restoreInteractionCoords({interaction:{coords:t,rect:e,modification:n}}){if(!n.result)return;const{startDelta:o}=n,{delta:i,rectDelta:r}=n.result,s=[[t.start,o],[t.cur,i]];for(var a=0;a<s.length;a++){var c;c=s[a];const[t,e]=c;t.page.x-=e.x,t.page.y-=e.y,t.client.x-=e.x,t.client.y-=e.y}e.left-=r.left,e.right-=r.right,e.top-=r.top,e.bottom-=r.bottom}shouldDo(t,e,n,o){return!(!t||!1===t.enabled||o&&!t.endOnly||t.endOnly&&!e||"start"===n&&!t.setStart)}copyFrom(t){this.startOffset=t.startOffset,this.startDelta=t.startDelta,this.startEdges=t.startEdges,this.edges=t.edges,this.states=t.states.map((t=>ie(t))),this.result=se(O({},t.result.coords),O({},t.result.rect))}destroy(){for(const t in this)this[t]=null}}function se(t,e){return{rect:e,coords:t,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function ae(t,e){const{defaults:n}=t,o={start:t.start,set:t.set,beforeEnd:t.beforeEnd,stop:t.stop},i=t=>{const i=t||{};i.enabled=!1!==i.enabled;for(const t in n)t in i||(i[t]=n[t]);const r={options:i,methods:o,name:e,enable:()=>(i.enabled=!0,r),disable:()=>(i.enabled=!1,r)};return r};return e&&"string"==typeof e&&(i._defaults=n,i._methods=o),i}function ce({iEvent:t,interaction:e}){const n=e.modification.result;n&&(t.modifiers=n.eventProps)}const le={id:"modifiers/base",before:["actions"],install:t=>{t.defaults.perAction.modifiers=[]},listeners:{"interactions:new":({interaction:t})=>{t.modification=new re(t)},"interactions:before-action-start":t=>{const{interaction:e}=t,n=t.interaction.modification;n.start(t,e.coords.start.page),e.edges=n.edges,n.applyToInteraction(t)},"interactions:before-action-move":t=>{const{interaction:e}=t,{modification:n}=e,o=n.setAndApply(t);return e.edges=n.edges,o},"interactions:before-action-end":t=>{const{interaction:e}=t,{modification:n}=e,o=n.beforeEnd(t);return e.edges=n.startEdges,o},"interactions:action-start":ce,"interactions:action-move":ce,"interactions:action-end":ce,"interactions:after-action-start":t=>t.interaction.modification.restoreInteractionCoords(t),"interactions:after-action-move":t=>t.interaction.modification.restoreInteractionCoords(t),"interactions:stop":t=>t.interaction.modification.stop(t)}};var pe=le;const ue={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};class de extends ot{relatedTarget=null;screenX;screenY;button;buttons;ctrlKey;shiftKey;altKey;metaKey;page;client;delta;rect;x0;y0;t0;dt;duration;clientX0;clientY0;velocity;speed;swipe;axes;preEnd;constructor(t,e,n,o,i,r,s){super(t),i=i||t.element;const a=t.interactable,c=(a&&a.options||ue).deltaSource,l=F(a,i,n),p="start"===o,u="end"===o,d=p?this:t.prevEvent,h=p?t.coords.start:u?{page:d.page,client:d.client,timeStamp:t.coords.cur.timeStamp}:t.coords.cur;this.page=O({},h.page),this.client=O({},h.client),this.rect=O({},t.rect),this.timeStamp=h.timeStamp,u||(this.page.x-=l.x,this.page.y-=l.y,this.client.x-=l.x,this.client.y-=l.y),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.buttons=e.buttons,this.target=i,this.currentTarget=i,this.preEnd=r,this.type=s||n+(o||""),this.interactable=a,this.t0=p?t.pointers[t.pointers.length-1].downTime:d.t0,this.x0=t.coords.start.page.x-l.x,this.y0=t.coords.start.page.y-l.y,this.clientX0=t.coords.start.client.x-l.x,this.clientY0=t.coords.start.client.y-l.y,this.delta=p||u?{x:0,y:0}:{x:this[c].x-d[c].x,y:this[c].y-d[c].y},this.dt=t.coords.delta.timeStamp,this.duration=this.timeStamp-this.t0,this.velocity=O({},t.coords.velocity[c]),this.speed=Y(this.velocity.x,this.velocity.y),this.swipe=u||"inertiastart"===o?this.getSwipe():null}getSwipe(){const t=this._interaction;if(t.prevEvent.speed<600||this.timeStamp-t.prevEvent.timeStamp>150)return null;let e=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;e<0&&(e+=360);const n=112.5<=e&&e<247.5,o=202.5<=e&&e<337.5;return{up:o,down:!o&&22.5<=e&&e<157.5,left:n,right:!n&&(292.5<=e||e<67.5),angle:e,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}preventDefault(){}stopImmediatePropagation(){this.immediatePropagationStopped=this.propagationStopped=!0}stopPropagation(){this.propagationStopped=!0}}Object.defineProperties(de.prototype,{pageX:{get(){return this.page.x},set(t){this.page.x=t}},pageY:{get(){return this.page.y},set(t){this.page.y=t}},clientX:{get(){return this.client.x},set(t){this.client.x=t}},clientY:{get(){return this.client.y},set(t){this.client.y=t}},dx:{get(){return this.delta.x},set(t){this.delta.x=t}},dy:{get(){return this.delta.y},set(t){this.delta.y=t}},velocityX:{get(){return this.velocity.x},set(t){this.velocity.x=t}},velocityY:{get(){return this.velocity.y},set(t){this.velocity.y=t}}});class he{id;pointer;event;downTime;downTarget;constructor(t,e,n,o,i){this.id=t,this.pointer=e,this.event=n,this.downTime=o,this.downTarget=i}}let fe=function(t){return t.interactable="",t.element="",t.prepared="",t.pointerIsDown="",t.pointerWasMoved="",t._proxy="",t}({}),ge=function(t){return t.start="",t.move="",t.end="",t.stop="",t.interacting="",t}({}),me=0;class ve{interactable=null;element=null;rect=null;_rects;edges=null;_scopeFire;prepared={name:null,axis:null,edges:null};pointerType;pointers=[];downEvent=null;downPointer={};_latestPointer={pointer:null,event:null,eventTarget:null};prevEvent=null;pointerIsDown=!1;pointerWasMoved=!1;_interacting=!1;_ending=!1;_stopped=!0;_proxy;simulation=null;get pointerMoveTolerance(){return 1}doMove=kt((function(t){this.move(t)}),"The interaction.doMove() method has been renamed to interaction.move()");coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}};_id=me++;constructor({pointerType:t,scopeFire:e}){this._scopeFire=e,this.pointerType=t;const n=this;this._proxy={};for(const t in fe)Object.defineProperty(this._proxy,t,{get:()=>n[t]});for(const t in ge)Object.defineProperty(this._proxy,t,{value:(...e)=>n[t](...e)});this._scopeFire("interactions:new",{interaction:this})}pointerDown(t,e,n){const o=this.updatePointer(t,e,n,!0),i=this.pointers[o];this._scopeFire("interactions:down",{pointer:t,event:e,eventTarget:n,pointerIndex:o,pointerInfo:i,type:"down",interaction:this})}start(t,e,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===t.name?2:1)||!e.options[t.name].enabled)&&(Rt(this.prepared,t),this.interactable=e,this.element=n,this.rect=e.getRect(n),this.edges=this.prepared.edges?O({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}pointerMove(t,e,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(t,e,n,!1);const o=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;let i,r;this.pointerIsDown&&!this.pointerWasMoved&&(i=this.coords.cur.client.x-this.coords.start.client.x,r=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Y(i,r)>this.pointerMoveTolerance);const s=this.getPointerIndex(t),a={pointer:t,pointerIndex:s,pointerInfo:this.pointers[s],event:e,type:"move",eventTarget:n,dx:i,dy:r,duplicate:o,interaction:this};o||function(t,e){const n=Math.max(e.timeStamp/1e3,.001);t.page.x=e.page.x/n,t.page.y=e.page.y/n,t.client.x=e.client.x/n,t.client.y=e.client.y/n,t.timeStamp=n}(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",a),o||this.simulation||(this.interacting()&&(a.type=null,this.move(a)),this.pointerWasMoved&&V(this.coords.prev,this.coords.cur))}move(t){t&&t.event||W(this.coords.delta),(t=O({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},t||{})).phase="move",this._doPhase(t)}pointerUp(t,e,n,o){let i=this.getPointerIndex(t);-1===i&&(i=this.updatePointer(t,e,n,!1));const r=/cancel$/i.test(e.type)?"cancel":"up";this._scopeFire("interactions:"+r,{pointer:t,pointerIndex:i,pointerInfo:this.pointers[i],event:e,eventTarget:n,type:r,curEventTarget:o,interaction:this}),this.simulation||this.end(e),this.removePointer(t,e)}documentBlur(t){this.end(t),this._scopeFire("interactions:blur",{event:t,type:"blur",interaction:this})}end(t){let e;this._ending=!0,t=t||this._latestPointer.event,this.interacting()&&(e=this._doPhase({event:t,interaction:this,phase:"end"})),this._ending=!1,!0===e&&this.stop()}currentAction(){return this._interacting?this.prepared.name:null}interacting(){return this._interacting}stop(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}getPointerIndex(t){const e=U(t);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:st(this.pointers,(t=>t.id===e))}getPointerInfo(t){return this.pointers[this.getPointerIndex(t)]}updatePointer(t,e,n,o){const i=U(t);let r=this.getPointerIndex(t),s=this.pointers[r];var a,c,l;return o=!1!==o&&(o||/(down|start)$/i.test(e.type)),s?s.pointer=t:(s=new he(i,t,e,null,null),r=this.pointers.length,this.pointers.push(s)),H(this.coords.cur,this.pointers.map((t=>t.pointer)),this._now()),a=this.coords.delta,c=this.coords.prev,l=this.coords.cur,a.page.x=l.page.x-c.page.x,a.page.y=l.page.y-c.page.y,a.client.x=l.client.x-c.client.x,a.client.y=l.client.y-c.client.y,a.timeStamp=l.timeStamp-c.timeStamp,o&&(this.pointerIsDown=!0,s.downTime=this.coords.cur.timeStamp,s.downTarget=n,q(this.downPointer,t),this.interacting()||(V(this.coords.start,this.coords.cur),V(this.coords.prev,this.coords.cur),this.downEvent=e,this.pointerWasMoved=!1)),this._updateLatestPointer(t,e,n),this._scopeFire("interactions:update-pointer",{pointer:t,event:e,eventTarget:n,down:o,pointerInfo:s,pointerIndex:r,interaction:this}),r}removePointer(t,e){const n=this.getPointerIndex(t);if(-1===n)return;const o=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:t,event:e,eventTarget:null,pointerIndex:n,pointerInfo:o,interaction:this}),this.pointers.splice(n,1),this.pointerIsDown=!1}_updateLatestPointer(t,e,n){this._latestPointer.pointer=t,this._latestPointer.event=e,this._latestPointer.eventTarget=n}destroy(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}_createPreparedEvent(t,e,n,o){return new de(this,t,this.prepared.name,e,this.element,n,o)}_fireEvent(t){var e;null==(e=this.interactable)||e.fire(t),(!this.prevEvent||t.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=t)}_doPhase(t){const{event:e,phase:n,preEnd:o,type:i}=t,{rect:r}=this;r&&"move"===n&&(R(this.edges,r,this.coords.delta[this.interactable.options.deltaSource]),r.width=r.right-r.left,r.height=r.bottom-r.top);if(!1===this._scopeFire("interactions:before-action-"+n,t))return!1;const s=t.iEvent=this._createPreparedEvent(e,n,o,i);return this._scopeFire("interactions:action-"+n,t),"start"===n&&(this.prevEvent=s),this._fireEvent(s),this._scopeFire("interactions:after-action-"+n,t),!0}_now(){return Date.now()}}function ye({interaction:t}){be(t)}function be(t){if(!function(t){return!(!t.offset.pending.x&&!t.offset.pending.y)}(t))return!1;const{pending:e}=t.offset;return we(t.coords.cur,e),we(t.coords.delta,e),R(t.edges,t.rect,e),e.x=0,e.y=0,!0}function xe({x:t,y:e}){this.offset.pending.x+=t,this.offset.pending.y+=e,this.offset.total.x+=t,this.offset.total.y+=e}function we({page:t,client:e},{x:n,y:o}){t.x+=n,t.y+=o,e.x+=n,e.y+=o}ge.offsetBy="";const Ee={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install(t){t.Interaction.prototype.offsetBy=xe},listeners:{"interactions:new":({interaction:t})=>{t.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":({interaction:t})=>function(t){t.pointerIsDown&&(we(t.coords.cur,t.offset.total),t.offset.pending.x=0,t.offset.pending.y=0)}(t),"interactions:before-action-start":ye,"interactions:before-action-move":ye,"interactions:before-action-end":function({interaction:t}){if(be(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function({interaction:t}){t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}};var Te=Ee;class Se{active=!1;isModified=!1;smoothEnd=!1;allowResume=!1;modification;modifierCount=0;modifierArg;startCoords;t0=0;v0=0;te=0;targetOffset;modifiedOffset;currentOffset;lambda_v0=0;one_ve_v0=0;timeout;interaction;constructor(t){this.interaction=t}start(t){const{interaction:e}=this,n=_e(e);if(!n||!n.enabled)return!1;const{client:o}=e.coords.velocity,i=Y(o.x,o.y),r=this.modification||(this.modification=new re(e));r.copyFrom(e.modification),this.t0=e._now(),this.allowResume=n.allowResume,this.v0=i,this.currentOffset={x:0,y:0},this.startCoords=e.coords.cur.page,this.modifierArg=r.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"});if(this.t0-e.coords.cur.timeStamp<50&&i>n.minSpeed&&i>n.endSpeed)this.startInertia();else{if(r.result=r.setAll(this.modifierArg),!r.result.changed)return!1;this.startSmoothEnd()}return e.modification.result.rect=null,e.offsetBy(this.targetOffset),e._doPhase({interaction:e,event:t,phase:"inertiastart"}),e.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),e.modification.result.rect=null,this.active=!0,e.simulation=this,!0}startInertia(){const t=this.interaction.coords.velocity.client,e=_e(this.interaction),n=e.resistance,o=-Math.log(e.endSpeed/this.v0)/n;this.targetOffset={x:(t.x-o)/n,y:(t.y-o)/n},this.te=o,this.lambda_v0=n/this.v0,this.one_ve_v0=1-e.endSpeed/this.v0;const{modification:i,modifierArg:r}=this;r.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},i.result=i.setAll(r),i.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+i.result.delta.x,y:this.targetOffset.y+i.result.delta.y}),this.onNextFrame((()=>this.inertiaTick()))}startSmoothEnd(){this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame((()=>this.smoothEndTick()))}onNextFrame(t){this.timeout=Dt.request((()=>{this.active&&t()}))}inertiaTick(){const{interaction:t}=this,e=_e(t).resistance,n=(t._now()-this.t0)/1e3;if(n<this.te){const p=1-(Math.exp(-e*n)-this.lambda_v0)/this.one_ve_v0;let u;this.isModified?(o=0,i=0,r=this.targetOffset.x,s=this.targetOffset.y,a=this.modifiedOffset.x,c=this.modifiedOffset.y,u={x:Me(l=p,o,r,a),y:Me(l,i,s,c)}):u={x:this.targetOffset.x*p,y:this.targetOffset.y*p};const d={x:u.x-this.currentOffset.x,y:u.y-this.currentOffset.y};this.currentOffset.x+=d.x,this.currentOffset.y+=d.y,t.offsetBy(d),t.move(),this.onNextFrame((()=>this.inertiaTick()))}else t.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end();var o,i,r,s,a,c,l}smoothEndTick(){const{interaction:t}=this,e=t._now()-this.t0,{smoothEndDuration:n}=_e(t);if(e<n){const o={x:De(e,0,this.targetOffset.x,n),y:De(e,0,this.targetOffset.y,n)},i={x:o.x-this.currentOffset.x,y:o.y-this.currentOffset.y};this.currentOffset.x+=i.x,this.currentOffset.y+=i.y,t.offsetBy(i),t.move({skipModifiers:this.modifierCount}),this.onNextFrame((()=>this.smoothEndTick()))}else t.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}resume({pointer:t,event:e,eventTarget:n}){const{interaction:o}=this;o.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),o.updatePointer(t,e,n,!0),o._doPhase({interaction:o,event:e,phase:"resume"}),V(o.coords.prev,o.coords.cur),this.stop()}end(){this.interaction.move(),this.interaction.end(),this.stop()}stop(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Dt.cancel(this.timeout)}}function _e({interactable:t,prepared:e}){return t&&t.options&&e.name&&t.options[e.name].inertia}const Pe={id:"inertia",before:["modifiers","actions"],install:function(t){const{defaults:e}=t;t.usePlugin(Te),t.usePlugin(pe),t.actions.phases.inertiastart=!0,t.actions.phases.resume=!0,e.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":({interaction:t})=>{t.inertia=new Se(t)},"interactions:before-action-end":function({interaction:t,event:e}){return(!t._interacting||t.simulation||!t.inertia.start(e))&&null},"interactions:down":function(t){const{interaction:e,eventTarget:n}=t,o=e.inertia;if(!o.active)return;let i=n;for(;a.element(i);){if(i===e.element){o.resume(t);break}i=b(i)}},"interactions:stop":function({interaction:t}){const e=t.inertia;e.active&&e.stop()},"interactions:before-action-resume":t=>{const{modification:e}=t.interaction;e.stop(t),e.start(t,t.interaction.coords.cur.page),e.applyToInteraction(t)},"interactions:before-action-inertiastart":t=>t.interaction.modification.setAndApply(t),"interactions:action-resume":ce,"interactions:action-inertiastart":ce,"interactions:after-action-inertiastart":t=>t.interaction.modification.restoreInteractionCoords(t),"interactions:after-action-resume":t=>t.interaction.modification.restoreInteractionCoords(t)}};function Me(t,e,n,o){const i=1-t;return i*i*e+2*i*t*n+t*t*o}function De(t,e,n,o){return-n*(t/=o)*(t-2)+e}var Ie=Pe;function Oe(t,e){for(var n=0;n<e.length;n++){const o=e[n];if(t.immediatePropagationStopped)break;o(t)}}class ze{options;types={};propagationStopped=!1;immediatePropagationStopped=!1;global;constructor(t){this.options=O({},t||{})}fire(t){let e;const n=this.global;(e=this.types[t.type])&&Oe(t,e),!t.propagationStopped&&n&&(e=n[t.type])&&Oe(t,e)}on(t,e){const n=j(t,e);for(t in n)this.types[t]=it(this.types[t]||[],n[t])}off(t,e){const n=j(t,e);for(t in n){const e=this.types[t];if(e&&e.length)for(var o=0;o<n[t].length;o++){const i=n[t][o],r=e.indexOf(i);-1!==r&&e.splice(r,1)}}}getRect(t){return null}}class Ae{currentTarget;originalEvent;type;constructor(t){this.originalEvent=t,q(this,t)}preventOriginalDefault(){this.originalEvent.preventDefault()}stopPropagation(){this.originalEvent.stopPropagation()}stopImmediatePropagation(){this.originalEvent.stopImmediatePropagation()}}function Ce(t){return a.object(t)?{capture:!!t.capture,passive:!!t.passive}:{capture:!!t,passive:!1}}function ke(t,e){return t===e||("boolean"==typeof t?!!e.capture===t&&!1==!!e.passive:!!t.capture==!!e.capture&&!!t.passive==!!e.passive)}var Re={id:"events",install:function(t){var e;const n=[],o={},i=[],r={add:s,remove:c,addDelegate:function(t,e,n,r,a){const c=Ce(a);if(!o[n]){o[n]=[];for(var u=0;u<i.length;u++){const t=i[u];s(t,n,l),s(t,n,p,!0)}}const d=o[n];let h=at(d,(n=>n.selector===t&&n.context===e));h||(h={selector:t,context:e,listeners:[]},d.push(h));h.listeners.push({func:r,options:c})},removeDelegate:function(t,e,n,i,r){const s=Ce(r),a=o[n];let u,d=!1;if(!a)return;for(u=a.length-1;u>=0;u--){const o=a[u];if(o.selector===t&&o.context===e){const{listeners:t}=o;for(let o=t.length-1;o>=0;o--){const r=t[o];if(r.func===i&&ke(r.options,s)){t.splice(o,1),t.length||(a.splice(u,1),c(e,n,l),c(e,n,p,!0)),d=!0;break}}if(d)break}}},delegateListener:l,delegateUseCapture:p,delegatedEvents:o,documents:i,targets:n,supportsOptions:!1,supportsPassive:!1};function s(t,e,o,i){if(!t.addEventListener)return;const s=Ce(i);let a=at(n,(e=>e.eventTarget===t));a||(a={eventTarget:t,events:{}},n.push(a)),a.events[e]||(a.events[e]=[]),at(a.events[e],(t=>t.func===o&&ke(t.options,s)))||(t.addEventListener(e,o,r.supportsOptions?s:s.capture),a.events[e].push({func:o,options:s}))}function c(t,e,o,i){if(!t.addEventListener||!t.removeEventListener)return;const s=st(n,(e=>e.eventTarget===t)),a=n[s];if(!a||!a.events)return;if("all"===e){for(e in a.events)a.events.hasOwnProperty(e)&&c(t,e,"all");return}let l=!1;const p=a.events[e];if(p){if("all"===o){for(let n=p.length-1;n>=0;n--){const o=p[n];c(t,e,o.func,o.options)}return}{const n=Ce(i);for(let i=0;i<p.length;i++){const s=p[i];if(s.func===o&&ke(s.options,n)){t.removeEventListener(e,o,r.supportsOptions?n:n.capture),p.splice(i,1),0===p.length&&(delete a.events[e],l=!0);break}}}}l&&!Object.keys(a.events).length&&n.splice(s,1)}function l(t,e){const n=Ce(e),i=new Ae(t),r=o[t.type],[s]=et(t);let c=s;for(;a.element(c);){for(let t=0;t<r.length;t++){const e=r[t],{selector:o,context:a}=e;if(x(c,o)&&v(a,s)&&v(a,c)){const{listeners:t}=e;i.currentTarget=c;for(var l=0;l<t.length;l++){const e=t[l];ke(e.options,n)&&e.func(i)}}}c=b(c)}}function p(t){return l(t,!0)}return null==(e=t.document)||e.createElement("div").addEventListener("test",null,{get capture(){return r.supportsOptions=!0},get passive(){return r.supportsPassive=!0}}),t.events=r,r}};const Fe={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search(t){for(var e=0;e<Fe.methodOrder.length;e++){var n;n=Fe.methodOrder[e];const o=Fe[n](t);if(o)return o}return null},simulationResume({pointerType:t,eventType:e,eventTarget:n,scope:o}){if(!/down|start/i.test(e))return null;for(var i=0;i<o.interactions.list.length;i++){const e=o.interactions.list[i];let r=n;if(e.simulation&&e.simulation.allowResume&&e.pointerType===t)for(;r;){if(r===e.element)return e;r=b(r)}}return null},mouseOrPen({pointerId:t,pointerType:e,eventType:n,scope:o}){if("mouse"!==e&&"pen"!==e)return null;let i;for(var r=0;r<o.interactions.list.length;r++){const n=o.interactions.list[r];if(n.pointerType===e){if(n.simulation&&!je(n,t))continue;if(n.interacting())return n;i||(i=n)}}if(i)return i;for(var s=0;s<o.interactions.list.length;s++){const t=o.interactions.list[s];if(!(t.pointerType!==e||/down/i.test(n)&&t.simulation))return t}return null},hasPointer({pointerId:t,scope:e}){for(var n=0;n<e.interactions.list.length;n++){const o=e.interactions.list[n];if(je(o,t))return o}return null},idle({pointerType:t,scope:e}){for(var n=0;n<e.interactions.list.length;n++){const o=e.interactions.list[n];if(1===o.pointers.length){const t=o.interactable;if(t&&(!t.options.gesture||!t.options.gesture.enabled))continue}else if(o.pointers.length>=2)continue;if(!o.interacting()&&t===o.pointerType)return o}return null}};function je(t,e){return t.pointers.some((({id:t})=>t===e))}var Xe=Fe;const Ye=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Le(t,e){return function(n){const o=e.interactions.list,i=tt(n),[r,s]=et(n),a=[];if(/^touch/.test(n.type)){e.prevTouchTime=e.now();for(var c=0;c<n.changedTouches.length;c++){var l;l=n.changedTouches[c];const t={pointer:l,pointerId:U(l),pointerType:i,eventType:n.type,eventTarget:r,curEventTarget:s,scope:e},o=qe(t);a.push([t.pointer,t.eventTarget,t.curEventTarget,o])}}else{let t=!1;if(!m.supportsPointerEvent&&/mouse/.test(n.type)){for(let e=0;e<o.length&&!t;e++)t="mouse"!==o[e].pointerType&&o[e].pointerIsDown;t=t||e.now()-e.prevTouchTime<500||0===n.timeStamp}if(!t){const t={pointer:n,pointerId:U(n),pointerType:i,eventType:n.type,curEventTarget:s,eventTarget:r,scope:e},o=qe(t);a.push([t.pointer,t.eventTarget,t.curEventTarget,o])}}for(var p=0;p<a.length;p++){const[e,o,i,r]=a[p];r[t](e,n,o,i)}}}function qe(t){const{pointerType:e,scope:n}=t,o={interaction:Xe.search(t),searchDetails:t};return n.fire("interactions:find",o),o.interaction||n.interactions.new({pointerType:e})}function Ve({doc:t,scope:e,options:n},o){const{interactions:{docEvents:i},events:r}=e,s=r[o];e.browser.isIOS&&!n.events&&(n.events={passive:!1});for(const e in r.delegatedEvents)s(t,e,r.delegateListener),s(t,e,r.delegateUseCapture,!0);const a=n&&n.events;for(var c=0;c<i.length;c++){var l;l=i[c];const{type:e,listener:n}=l;s(t,e,n,a)}}const We={id:"core/interactions",install:function(t){const e={};for(var n=0;n<Ye.length;n++){const o=Ye[n];e[o]=Le(o,t)}const o=m.pEventTypes;let i;function r(){for(var e=0;e<t.interactions.list.length;e++){const o=t.interactions.list[e];if(o.pointerIsDown&&"touch"===o.pointerType&&!o._interacting)for(var n=0;n<o.pointers.length;n++){const e=o.pointers[n];t.documents.some((({doc:t})=>v(t,e.downTarget)))||o.removePointer(e.pointer,e.event)}}}i=f.PointerEvent?[{type:o.down,listener:r},{type:o.down,listener:e.pointerDown},{type:o.move,listener:e.pointerMove},{type:o.up,listener:e.pointerUp},{type:o.cancel,listener:e.pointerUp}]:[{type:"mousedown",listener:e.pointerDown},{type:"mousemove",listener:e.pointerMove},{type:"mouseup",listener:e.pointerUp},{type:"touchstart",listener:r},{type:"touchstart",listener:e.pointerDown},{type:"touchmove",listener:e.pointerMove},{type:"touchend",listener:e.pointerUp},{type:"touchcancel",listener:e.pointerUp}],i.push({type:"blur",listener(e){for(var n=0;n<t.interactions.list.length;n++){t.interactions.list[n].documentBlur(e)}}}),t.prevTouchTime=0,t.Interaction=class extends ve{get pointerMoveTolerance(){return t.interactions.pointerMoveTolerance}set pointerMoveTolerance(e){t.interactions.pointerMoveTolerance=e}_now(){return t.now()}},t.interactions={list:[],new(e){e.scopeFire=(e,n)=>t.fire(e,n);const n=new t.Interaction(e);return t.interactions.list.push(n),n},listeners:e,docEvents:i,pointerMoveTolerance:1},t.usePlugin(ne)},listeners:{"scope:add-document":t=>Ve(t,"add"),"scope:remove-document":t=>Ve(t,"remove"),"interactable:unset":({interactable:t},e)=>{for(let n=e.interactions.list.length-1;n>=0;n--){const o=e.interactions.list[n];o.interactable===t&&(o.stop(),e.fire("interactions:destroy",{interaction:o}),o.destroy(),e.interactions.list.length>2&&e.interactions.list.splice(n,1))}}},onDocSignal:Ve,doOnInteractions:Le,methodNames:Ye};var Be=We,Ge=function(t){return t[t.On=0]="On",t[t.Off=1]="Off",t}(Ge||{});class Ne{get _defaults(){return{base:{},perAction:{},actions:{}}}target;options;_actions;events=new ze;_context;_win;_doc;_scopeEvents;constructor(t,e,n,o){this._actions=e.actions,this.target=t,this._context=e.context||n,this._win=i(I(t)?this._context:t),this._doc=this._win.document,this._scopeEvents=o,this.set(e)}setOnEvents(t,e){return a.func(e.onstart)&&this.on(t+"start",e.onstart),a.func(e.onmove)&&this.on(t+"move",e.onmove),a.func(e.onend)&&this.on(t+"end",e.onend),a.func(e.oninertiastart)&&this.on(t+"inertiastart",e.oninertiastart),this}updatePerActionListeners(t,e,n){var o;const i=null==(o=this._actions.map[t])?void 0:o.filterEventType,r=t=>(null==i||i(t))&&oe(t,this._actions);(a.array(e)||a.object(e))&&this._onOff(Ge.Off,t,e,void 0,r),(a.array(n)||a.object(n))&&this._onOff(Ge.On,t,n,void 0,r)}setPerAction(t,e){const n=this._defaults;for(const o in e){const i=o,r=this.options[t],s=e[i];"listeners"===i&&this.updatePerActionListeners(t,r.listeners,s),a.array(s)?r[i]=rt(s):a.plainObject(s)?(r[i]=O(r[i]||{},ie(s)),a.object(n.perAction[i])&&"enabled"in n.perAction[i]&&(r[i].enabled=!1!==s.enabled)):a.bool(s)&&a.object(n.perAction[i])?r[i].enabled=s:r[i]=s}}getRect(t){return t=t||(a.element(this.target)?this.target:null),a.string(this.target)&&(t=t||this._context.querySelector(this.target)),M(t)}rectChecker(t){return a.func(t)?(this.getRect=e=>{const n=O({},t.apply(this,e));return"width"in n||(n.width=n.right-n.left,n.height=n.bottom-n.top),n},this):null===t?(delete this.getRect,this):this.getRect}_backCompatOption(t,e){if(I(e)||a.object(e)){this.options[t]=e;for(const n in this._actions.map)this.options[n][t]=e;return this}return this.options[t]}origin(t){return this._backCompatOption("origin",t)}deltaSource(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource}getAllElements(){const{target:t}=this;return a.string(t)?Array.from(this._context.querySelectorAll(t)):a.func(t)&&t.getAllElements?t.getAllElements():a.element(t)?[t]:[]}context(){return this._context}inContext(t){return this._context===t.ownerDocument||v(this._context,t)}testIgnoreAllow(t,e,n){return!this.testIgnore(t.ignoreFrom,e,n)&&this.testAllow(t.allowFrom,e,n)}testAllow(t,e,n){return!t||!!a.element(n)&&(a.string(t)?S(n,t,e):!!a.element(t)&&v(t,n))}testIgnore(t,e,n){return!(!t||!a.element(n))&&(a.string(t)?S(n,t,e):!!a.element(t)&&v(t,n))}fire(t){return this.events.fire(t),this}_onOff(t,e,n,o,i){a.object(e)&&!a.array(e)&&(o=n,n=null);const r=j(e,n,i);for(let e in r){"wheel"===e&&(e=m.wheelEvent);for(var s=0;s<r[e].length;s++){const n=r[e][s];oe(e,this._actions)?this.events[t===Ge.On?"on":"off"](e,n):a.string(this.target)?this._scopeEvents[t===Ge.On?"addDelegate":"removeDelegate"](this.target,this._context,e,n,o):this._scopeEvents[t===Ge.On?"add":"remove"](this.target,e,n,o)}}return this}on(t,e,n){return this._onOff(Ge.On,t,e,n)}off(t,e,n){return this._onOff(Ge.Off,t,e,n)}set(t){const e=this._defaults;a.object(t)||(t={}),this.options=ie(e.base);for(const n in this._actions.methodDict){const o=n,i=this._actions.methodDict[o];this.options[o]={},this.setPerAction(o,O(O({},e.perAction),e.actions[o])),this[i](t[o])}for(const e in t)"getRect"!==e?a.func(this[e])&&this[e](t[e]):this.rectChecker(t.getRect);return this}unset(){if(a.string(this.target))for(const t in this._scopeEvents.delegatedEvents){const e=this._scopeEvents.delegatedEvents[t];for(let n=e.length-1;n>=0;n--){const{selector:o,context:i,listeners:r}=e[n];o===this.target&&i===this._context&&e.splice(n,1);for(let e=r.length-1;e>=0;e--)this._scopeEvents.removeDelegate(this.target,this._context,t,r[e][0],r[e][1])}}else this._scopeEvents.remove(this.target,"all")}}class Ue{list=[];selectorMap={};scope;constructor(t){this.scope=t,t.addListeners({"interactable:unset":({interactable:t})=>{const{target:e}=t,n=a.string(e)?this.selectorMap[e]:e[this.scope.id],o=st(n,(e=>e===t));n.splice(o,1)}})}new(t,e){e=O(e||{},{actions:this.scope.actions});const n=new this.scope.Interactable(t,e,this.scope.document,this.scope.events);return this.scope.addDocument(n._doc),this.list.push(n),a.string(t)?(this.selectorMap[t]||(this.selectorMap[t]=[]),this.selectorMap[t].push(n)):(n.target[this.scope.id]||Object.defineProperty(t,this.scope.id,{value:[],configurable:!0}),t[this.scope.id].push(n)),this.scope.fire("interactable:new",{target:t,options:e,interactable:n,win:this.scope._win}),n}getExisting(t,e){const n=e&&e.context||this.scope.document,o=a.string(t),i=o?this.selectorMap[t]:t[this.scope.id];if(i)return at(i,(e=>e._context===n&&(o||e.inContext(t))))}forEachMatch(t,e){for(var n=0;n<this.list.length;n++){const o=this.list[n];let i;if((a.string(o.target)?a.element(t)&&x(t,o.target):t===o.target)&&o.inContext(t)&&(i=e(o)),void 0!==i)return i}}}function He(t){return t&&t.replace(/\/.*$/,"")}const $e=new class{id="__interact_scope_"+Math.floor(100*Math.random());isInitialized=!1;listenerMaps=[];browser=m;defaults=ie(ue);Eventable=ze;actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}};interactStatic=function(t){const e=(n,o)=>{let i=t.interactables.getExisting(n,o);return i||(i=t.interactables.new(n,o),i.events.global=e.globalEvents),i};return e.getPointerAverage=K,e.getTouchBBox=J,e.getTouchDistance=Q,e.getTouchAngle=Z,e.getElementRect=M,e.getElementClientRect=P,e.matchesSelector=x,e.closest=y,e.globalEvents={},e.version="1.10.24",e.scope=t,e.use=function(t,e){return this.scope.usePlugin(t,e),this},e.isSet=function(t,e){return!!this.scope.interactables.get(t,e&&e.context)},e.on=kt((function(t,e,n){if(a.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),a.array(t)){for(var o=t,i=0;i<o.length;i++){const t=o[i];this.on(t,e,n)}return this}if(a.object(t)){for(const n in t)this.on(n,t[n],e);return this}return oe(t,this.scope.actions)?this.globalEvents[t]?this.globalEvents[t].push(e):this.globalEvents[t]=[e]:this.scope.events.add(this.scope.document,t,e,{options:n}),this}),"The interact.on() method is being deprecated"),e.off=kt((function(t,e,n){if(a.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),a.array(t)){for(var o=0;o<t.length;o++){const i=t[o];this.off(i,e,n)}return this}if(a.object(t)){for(const n in t)this.off(n,t[n],e);return this}if(oe(t,this.scope.actions)){let n;t in this.globalEvents&&-1!==(n=this.globalEvents[t].indexOf(e))&&this.globalEvents[t].splice(n,1)}else this.scope.events.remove(this.scope.document,t,e,n);return this}),"The interact.off() method is being deprecated"),e.debug=function(){return this.scope},e.supportsTouch=function(){return m.supportsTouch},e.supportsPointerEvent=function(){return m.supportsPointerEvent},e.stop=function(){for(var t=0;t<this.scope.interactions.list.length;t++){this.scope.interactions.list[t].stop()}return this},e.pointerMoveTolerance=function(t){return a.number(t)?(this.scope.interactions.pointerMoveTolerance=t,this):this.scope.interactions.pointerMoveTolerance},e.addDocument=function(t,e){this.scope.addDocument(t,e)},e.removeDocument=function(t){this.scope.removeDocument(t)},e}(this);InteractEvent=de;Interactable;interactables=new Ue(this);_win;document;window;documents=[];_plugins={list:[],map:{}};constructor(){const t=this;this.Interactable=class extends Ne{get _defaults(){return t.defaults}set(e){return super.set(e),t.fire("interactable:set",{options:e,interactable:this}),this}unset(){super.unset();const e=t.interactables.list.indexOf(this);e<0||(t.interactables.list.splice(e,1),t.fire("interactable:unset",{interactable:this}))}}}addListeners(t,e){this.listenerMaps.push({id:e,map:t})}fire(t,e){for(var n=0;n<this.listenerMaps.length;n++){var o;o=this.listenerMaps[n];const{map:{[t]:i}}=o;if(i&&!1===i(e,this,t))return!1}}onWindowUnload=t=>this.removeDocument(t.target);init(t){return this.isInitialized?this:function(t,e){t.isInitialized=!0,a.window(e)&&o(e);return f.init(e),m.init(e),Dt.init(e),t.window=e,t.document=e.document,t.usePlugin(Be),t.usePlugin(Re),t}(this,t)}pluginIsInstalled(t){const{id:e}=t;return e?!!this._plugins.map[e]:-1!==this._plugins.list.indexOf(t)}usePlugin(t,e){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,e),t.listeners&&t.before){let e=0;const n=this.listenerMaps.length,o=t.before.reduce(((t,e)=>(t[e]=!0,t[He(e)]=!0,t)),{});for(;e<n;e++){const t=this.listenerMaps[e].id;if(t&&(o[t]||o[He(t)]))break}this.listenerMaps.splice(e,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}addDocument(t,e){if(-1!==this.getDocIndex(t))return!1;const n=i(t);e=e?O({},e):{},this.documents.push({doc:t,options:e}),this.events.documents.push(t),t!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:n,scope:this,options:e})}removeDocument(t){const e=this.getDocIndex(t),n=i(t),o=this.documents[e].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(e,1),this.events.documents.splice(e,1),this.fire("scope:remove-document",{doc:t,window:n,scope:this,options:o})}getDocIndex(t){for(let e=0;e<this.documents.length;e++)if(this.documents[e].doc===t)return e;return-1}getDocOptions(t){const e=this.getDocIndex(t);return-1===e?null:this.documents[e].options}now(){return(this.window.Date||Date).now()}};var Ke=$e.interactStatic;const Je="undefined"!=typeof globalThis?globalThis:window;$e.init(Je);var Qe=Object.freeze({__proto__:null,edgeTarget:()=>{},elements:()=>{},grid:t=>{const e=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter((([e,n])=>e in t||n in t)),n=(n,o)=>{const{range:i,limits:r={left:-1/0,right:1/0,top:-1/0,bottom:1/0},offset:s={x:0,y:0}}=t,a={range:i,grid:t,x:null,y:null};for(var c=0;c<e.length;c++){var l;l=e[c];const[i,p]=l,u=Math.round((n-s.x)/t[i]),d=Math.round((o-s.y)/t[p]);a[i]=Math.max(r.left,Math.min(r.right,u*t[i]+s.x)),a[p]=Math.max(r.top,Math.min(r.bottom,d*t[p]+s.y))}return a};return n.grid=t,n.coordFields=e,n}});const Ze={id:"snappers",install(t){const{interactStatic:e}=t;e.snappers=O(e.snappers||{},Qe),e.createSnapGrid=e.snappers.grid}};var tn=Ze;const en={start(t){const{state:e,rect:n,edges:o,pageCoords:i}=t;let{ratio:r,enabled:s}=e.options;const{equalDelta:a,modifiers:c}=e.options;"preserve"===r&&(r=n.width/n.height),e.startCoords=O({},i),e.startRect=O({},n),e.ratio=r,e.equalDelta=a;const l=e.linkedEdges={top:o.top||o.left&&!o.bottom,left:o.left||o.top&&!o.right,bottom:o.bottom||o.right&&!o.top,right:o.right||o.bottom&&!o.left};if(e.xIsPrimaryAxis=!(!o.left&&!o.right),e.equalDelta){const t=(l.left?1:-1)*(l.top?1:-1);e.edgeSign={x:t,y:t}}else e.edgeSign={x:l.left?-1:1,y:l.top?-1:1};if(!1!==s&&O(o,l),null==c||!c.length)return;const p=new re(t.interaction);p.copyFrom(t.interaction.modification),p.prepareStates(c),e.subModification=p,p.startAll({...t})},set(t){const{state:e,rect:n,coords:o}=t,{linkedEdges:i}=e,r=O({},o),s=e.equalDelta?nn:on;if(O(t.edges,i),s(e,e.xIsPrimaryAxis,o,n),!e.subModification)return null;const a=O({},n);R(i,a,{x:o.x-r.x,y:o.y-r.y});const c=e.subModification.setAll({...t,rect:a,edges:i,pageCoords:o,prevCoords:o,prevRect:a}),{delta:l}=c;if(c.changed){s(e,Math.abs(l.x)>Math.abs(l.y),c.coords,c.rect),O(o,c.coords)}return c.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function nn({startCoords:t,edgeSign:e},n,o){n?o.y=t.y+(o.x-t.x)*e.y:o.x=t.x+(o.y-t.y)*e.x}function on({startRect:t,startCoords:e,ratio:n,edgeSign:o},i,r,s){if(i){const i=s.width/n;r.y=e.y+(i-t.height)*o.y}else{const i=s.height*n;r.x=e.x+(i-t.width)*o.x}}var rn=ae(en,"aspectRatio");const sn=()=>{};sn._defaults={};var an=sn;function cn(t,e,n){return a.func(t)?A(t,e.interactable,e.element,[n.x,n.y,e]):A(t,e.interactable,e.element)}const ln={start:function({rect:t,startOffset:e,state:n,interaction:o,pageCoords:i}){const{options:r}=n,{elementRect:s}=r,a=O({left:0,top:0,right:0,bottom:0},r.offset||{});if(t&&s){const n=cn(r.restriction,o,i);if(n){const e=n.right-n.left-t.width,o=n.bottom-n.top-t.height;e<0&&(a.left+=e,a.right+=e),o<0&&(a.top+=o,a.bottom+=o)}a.left+=e.left-t.width*s.left,a.top+=e.top-t.height*s.top,a.right+=e.right-t.width*(1-s.right),a.bottom+=e.bottom-t.height*(1-s.bottom)}n.offset=a},set:function({coords:t,interaction:e,state:n}){const{options:o,offset:i}=n,r=cn(o.restriction,e,t);if(!r)return;const s=function(t){return!t||"left"in t&&"top"in t||((t=O({},t)).left=t.x||0,t.top=t.y||0,t.right=t.right||t.left+t.width,t.bottom=t.bottom||t.top+t.height),t}(r);t.x=Math.max(Math.min(s.right-i.right,t.x),s.left+i.left),t.y=Math.max(Math.min(s.bottom-i.bottom,t.y),s.top+i.top)},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};var pn=ae(ln,"restrict");const un={top:1/0,left:1/0,bottom:-1/0,right:-1/0},dn={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function hn(t,e){for(var n=["top","left","bottom","right"],o=0;o<n.length;o++){const i=n[o];i in t||(t[i]=e[i])}return t}const fn={noInner:un,noOuter:dn,start:function({interaction:t,startOffset:e,state:n}){const{options:o}=n;let i;if(o){i=C(cn(o.offset,t,t.coords.start.page))}i=i||{x:0,y:0},n.offset={top:i.y+e.top,left:i.x+e.left,bottom:i.y-e.bottom,right:i.x-e.right}},set:function({coords:t,edges:e,interaction:n,state:o}){const{offset:i,options:r}=o;if(!e)return;const s=O({},t),a=cn(r.inner,n,s)||{},c=cn(r.outer,n,s)||{};hn(a,un),hn(c,dn),e.top?t.y=Math.min(Math.max(c.top+i.top,s.y),a.top+i.top):e.bottom&&(t.y=Math.max(Math.min(c.bottom+i.bottom,s.y),a.bottom+i.bottom)),e.left?t.x=Math.min(Math.max(c.left+i.left,s.x),a.left+i.left):e.right&&(t.x=Math.max(Math.min(c.right+i.right,s.x),a.right+i.right))},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};var gn=ae(fn,"restrictEdges");const mn=O({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(t){}},ln.defaults);var vn=ae({start:ln.start,set:ln.set,defaults:mn},"restrictRect");const yn={width:-1/0,height:-1/0},bn={width:1/0,height:1/0};var xn=ae({start:function(t){return fn.start(t)},set:function(t){const{interaction:e,state:n,rect:o,edges:i}=t,{options:r}=n;if(!i)return;const s=k(cn(r.min,e,t.coords))||yn,a=k(cn(r.max,e,t.coords))||bn;n.options={endOnly:r.endOnly,inner:O({},fn.noInner),outer:O({},fn.noOuter)},i.top?(n.options.inner.top=o.bottom-s.height,n.options.outer.top=o.bottom-a.height):i.bottom&&(n.options.inner.bottom=o.top+s.height,n.options.outer.bottom=o.top+a.height),i.left?(n.options.inner.left=o.right-s.width,n.options.outer.left=o.right-a.width):i.right&&(n.options.inner.right=o.left+s.width,n.options.outer.right=o.left+a.width),fn.set(t),n.options=r},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize");const wn={start:function(t){const{interaction:e,interactable:n,element:o,rect:i,state:r,startOffset:s}=t,{options:a}=r,c=a.offsetWithOrigin?function(t){const{element:e}=t.interaction,n=C(A(t.state.options.origin,null,null,[e])),o=n||F(t.interactable,e,t.interaction.prepared.name);return o}(t):{x:0,y:0};let l;if("startCoords"===a.offset)l={x:e.coords.start.page.x,y:e.coords.start.page.y};else{const t=A(a.offset,n,o,[e]);l=C(t)||{x:0,y:0},l.x+=c.x,l.y+=c.y}const{relativePoints:p}=a;r.offsets=i&&p&&p.length?p.map(((t,e)=>({index:e,relativePoint:t,x:s.left-i.width*t.x+l.x,y:s.top-i.height*t.y+l.y}))):[{index:0,relativePoint:null,x:l.x,y:l.y}]},set:function(t){const{interaction:e,coords:n,state:o}=t,{options:i,offsets:r}=o,s=F(e.interactable,e.element,e.prepared.name),c=O({},n),l=[];i.offsetWithOrigin||(c.x-=s.x,c.y-=s.y);for(var p=0;p<r.length;p++){const t=r[p],n=c.x-t.x,o=c.y-t.y;for(let r=0,s=i.targets.length;r<s;r++){const s=i.targets[r];let c;c=a.func(s)?s(n,o,e._proxy,t,r):s,c&&l.push({x:(a.number(c.x)?c.x:n)+t.x,y:(a.number(c.y)?c.y:o)+t.y,range:a.number(c.range)?c.range:i.range,source:s,index:r,offset:t})}}const u={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}};for(var d=0;d<l.length;d++){const t=l[d],e=t.range,n=t.x-c.x,o=t.y-c.y,i=Y(n,o);let r=i<=e;e===1/0&&u.inRange&&u.range!==1/0&&(r=!1),u.target&&!(r?u.inRange&&e!==1/0?i/e<u.distance/u.range:e===1/0&&u.range!==1/0||i<u.distance:!u.inRange&&i<u.distance)||(u.target=t,u.distance=i,u.range=e,u.inRange=r,u.delta.x=n,u.delta.y=o)}return u.inRange&&(n.x=u.target.x,n.y=u.target.y),o.closest=u,u},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};var En=ae(wn,"snap");const Tn={start:function(t){const{state:e,edges:n}=t,{options:o}=e;if(!n)return null;t.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:o.offset||"self",origin:{x:0,y:0},range:o.range}},e.targetFields=e.targetFields||[["width","height"],["x","y"]],wn.start(t),e.offsets=t.state.offsets,t.state=e},set:function(t){const{interaction:e,state:n,coords:o}=t,{options:i,offsets:r}=n,s={x:o.x-r[0].x,y:o.y-r[0].y};n.options=O({},i),n.options.targets=[];for(var c=0;c<(i.targets||[]).length;c++){const t=(i.targets||[])[c];let o;if(o=a.func(t)?t(s.x,s.y,e):t,o){for(var l=0;l<n.targetFields.length;l++){var p;p=n.targetFields[l];const[t,e]=p;if(t in o||e in o){o.x=o[t],o.y=o[e];break}}n.options.targets.push(o)}}const u=wn.set(t);return n.options=i,u},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};var Sn=ae(Tn,"snapSize");var _n={aspectRatio:rn,restrictEdges:gn,restrict:pn,restrictRect:vn,restrictSize:xn,snapEdges:ae({start:function(t){const{edges:e}=t;return e?(t.state.targetFields=t.state.targetFields||[[e.left?"left":"right",e.top?"top":"bottom"]],Tn.start(t)):null},set:Tn.set,defaults:O(ie(Tn.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:En,snapSize:Sn,spring:an,avoid:an,transform:an,rubberband:an};const Pn={id:"modifiers",install(t){const{interactStatic:e}=t;t.usePlugin(pe),t.usePlugin(tn),e.modifiers=_n;for(const e in _n){const{_defaults:n,_methods:o}=_n[e];n._methods=o,t.defaults.perAction[e]=n}}};var Mn=Pn;class Dn extends ot{constructor(t,e,n,o,i,r){if(super(i),q(this,n),n!==e&&q(this,e),this.timeStamp=r,this.originalEvent=n,this.type=t,this.pointerId=U(e),this.pointerType=tt(e),this.target=o,this.currentTarget=null,"tap"===t){const t=i.getPointerIndex(e);this.dt=this.timeStamp-i.pointers[t].downTime;const n=this.timeStamp-i.tapTime;this.double=!!i.prevTap&&"doubletap"!==i.prevTap.type&&i.prevTap.target===this.target&&n<500}else"doubletap"===t&&(this.dt=e.timeStamp-i.tapTime,this.double=!0)}_subtractOrigin({x:t,y:e}){return this.pageX-=t,this.pageY-=e,this.clientX-=t,this.clientY-=e,this}_addOrigin({x:t,y:e}){return this.pageX+=t,this.pageY+=e,this.clientX+=t,this.clientY+=e,this}preventDefault(){this.originalEvent.preventDefault()}}const In={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(t){t.pointerEvents=In,t.defaults.actions.pointerEvents=In.defaults,O(t.actions.phaselessTypes,In.types)},listeners:{"interactions:new":function({interaction:t}){t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function({down:t,pointerInfo:e}){if(!t&&e.hold)return;e.hold={duration:1/0,timeout:null}},"interactions:move":function(t,e){const{interaction:n,pointer:o,event:i,eventTarget:r,duplicate:s}=t;s||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&An(t),On({interaction:n,pointer:o,event:i,eventTarget:r,type:"move"},e))},"interactions:down":(t,e)=>{!function({interaction:t,pointer:e,event:n,eventTarget:o,pointerIndex:i},r){const s=t.pointers[i].hold,a=D(o),c={interaction:t,pointer:e,event:n,eventTarget:o,type:"hold",targets:[],path:a,node:null};for(var l=0;l<a.length;l++){const t=a[l];c.node=t,r.fire("pointerEvents:collect-targets",c)}if(!c.targets.length)return;let p=1/0;for(var u=0;u<c.targets.length;u++){const t=c.targets[u].eventable.options.holdDuration;t<p&&(p=t)}s.duration=p,s.timeout=setTimeout((()=>{On({interaction:t,eventTarget:o,pointer:e,event:n,type:"hold"},r)}),p)}(t,e),On(t,e)},"interactions:up":(t,e)=>{An(t),On(t,e),function({interaction:t,pointer:e,event:n,eventTarget:o},i){t.pointerWasMoved||On({interaction:t,eventTarget:o,pointer:e,event:n,type:"tap"},i)}(t,e)},"interactions:cancel":(t,e)=>{An(t),On(t,e)}},PointerEvent:Dn,fire:On,collectEventTargets:zn,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function On(t,e){const{interaction:n,pointer:o,event:i,eventTarget:r,type:s,targets:a=zn(t,e)}=t,c=new Dn(s,o,i,r,n,e.now());e.fire("pointerEvents:new",{pointerEvent:c});const l={interaction:n,pointer:o,event:i,eventTarget:r,targets:a,type:s,pointerEvent:c};for(let t=0;t<a.length;t++){const e=a[t];for(const t in e.props||{})c[t]=e.props[t];const n=F(e.eventable,e.node);if(c._subtractOrigin(n),c.eventable=e.eventable,c.currentTarget=e.node,e.eventable.fire(c),c._addOrigin(n),c.immediatePropagationStopped||c.propagationStopped&&t+1<a.length&&a[t+1].node!==c.currentTarget)break}if(e.fire("pointerEvents:fired",l),"tap"===s){const t=c.double?On({interaction:n,pointer:o,event:i,eventTarget:r,type:"doubletap"},e):c;n.prevTap=t,n.tapTime=t.timeStamp}return c}function zn({interaction:t,pointer:e,event:n,eventTarget:o,type:i},r){const s=t.getPointerIndex(e),a=t.pointers[s];if("tap"===i&&(t.pointerWasMoved||!a||a.downTarget!==o))return[];const c=D(o),l={interaction:t,pointer:e,event:n,eventTarget:o,type:i,path:c,targets:[],node:null};for(var p=0;p<c.length;p++){const t=c[p];l.node=t,r.fire("pointerEvents:collect-targets",l)}return"hold"===i&&(l.targets=l.targets.filter((e=>{var n;return e.eventable.options.holdDuration===(null==(n=t.pointers[s])||null==(n=n.hold)?void 0:n.duration)}))),l.targets}function An({interaction:t,pointerIndex:e}){const n=t.pointers[e].hold;n&&n.timeout&&(clearTimeout(n.timeout),n.timeout=null)}var Cn=Object.freeze({__proto__:null,default:In});function kn({interaction:t}){t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}const Rn={id:"pointer-events/holdRepeat",install:function(t){t.usePlugin(In);const{pointerEvents:e}=t;e.defaults.holdRepeatInterval=0,e.types.holdrepeat=t.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(((t,e)=>(t["pointerEvents:"+e]=kn,t)),{"pointerEvents:new":function({pointerEvent:t}){"hold"===t.type&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function({interaction:t,pointerEvent:e,eventTarget:n,targets:o},i){if("hold"!==e.type||!o.length)return;const r=o[0].eventable.options.holdRepeatInterval;r<=0||(t.holdIntervalHandle=setTimeout((()=>{i.pointerEvents.fire({interaction:t,eventTarget:n,type:"hold",pointer:e,event:e},i)}),r))}})};var Fn=Rn;const jn={id:"pointer-events/interactableTargets",install:function(t){const{Interactable:e}=t;e.prototype.pointerEvents=function(t){return O(this.events.options,t),this};const n=e.prototype._backCompatOption;e.prototype._backCompatOption=function(t,e){const o=n.call(this,t,e);return o===this&&(this.events.options[t]=e),o}},listeners:{"pointerEvents:collect-targets":({targets:t,node:e,type:n,eventTarget:o},i)=>{i.interactables.forEachMatch(e,(i=>{const r=i.events,s=r.options;r.types[n]&&r.types[n].length&&i.testIgnoreAllow(s,e,o)&&t.push({node:e,eventable:r,props:{interactable:i}})}))},"interactable:new":({interactable:t})=>{t.events.getRect=function(e){return t.getRect(e)}},"interactable:set":({interactable:t,options:e},n)=>{O(t.events.options,n.pointerEvents.defaults),O(t.events.options,e.pointerEvents||{})}}};var Xn=jn;const Yn={id:"pointer-events",install(t){t.usePlugin(Cn),t.usePlugin(Fn),t.usePlugin(Xn)}};var Ln=Yn;function qn(t,e,n,o,i){const r=t.interactions.new({pointerType:"reflow"}),s={interaction:r,event:i,pointer:i,eventTarget:n,phase:"reflow"};r.interactable=e,r.element=n,r.prevEvent=i,r.updatePointer(i,i,n,!0),W(r.coords.delta),Rt(r.prepared,o),r._doPhase(s);const{Promise:a}=t.window,c=a?new a((t=>{r._reflowResolve=t})):void 0;return r._reflowPromise=c,r.start(o,e,n),r._interacting?(r.move(s),r.end(i)):(r.stop(),r._reflowResolve()),r.removePointer(i,i),c}const Vn={id:"reflow",install:function(t){const{Interactable:e}=t;t.actions.phases.reflow=!0,e.prototype.reflow=function(e){return function(t,e,n){const o=t.getAllElements(),i=n.window.Promise,r=i?[]:null;for(var s=0;s<o.length;s++){const a=o[s],c=t.getRect(a);if(!c)break;const l=at(n.interactions.list,(n=>n.interacting()&&n.interactable===t&&n.element===a&&n.prepared.name===e.name));let p;if(l)l.move(),r&&(p=l._reflowPromise||new i((t=>{l._reflowResolve=t})));else{const o=k(c),i=nt({page:{x:o.x,y:o.y},client:{x:o.x,y:o.y},timeStamp:n.now()});p=qn(n,t,a,e,i)}r&&r.push(p)}return r&&i.all(r).then((()=>t))}(this,e,t)}},listeners:{"interactions:stop":({interaction:t},e)=>{"reflow"===t.pointerType&&(t._reflowResolve&&t._reflowResolve(),((t,e)=>{t.splice(t.indexOf(e),1)})(e.interactions.list,t))}}};var Wn=Vn;if(Ke.use(ne),Ke.use(Te),Ke.use(Ln),Ke.use(Ie),Ke.use(Mn),Ke.use(Zt),Ke.use(St),Ke.use(Ct),Ke.use(Wn),Ke.default=Ke,"object"==typeof module&&module)try{module.exports=Ke}catch(t){}return Ke.default=Ke,Ke}));
//# sourceMappingURL=interact.min.js.map
